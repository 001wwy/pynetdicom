

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pynetdicom3.pdu &mdash; pynetdicom3 0.9.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../_static/css/pynetdicom3.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pynetdicom3.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> pynetdicom3
          

          
            
            <img src="../../_static/pydicom_flat_black.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.9.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ae_intro.html">ApplicationEntity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../assoc_intro.html">Introduction to Association</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">Package documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pynetdicom3</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>pynetdicom3.pdu</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pynetdicom3.pdu</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Implementation of Dicom Standard, PS 3.8, section 9.3</span>
<span class="sd">Dicom Upper Layer Protocol for TCP/IP</span>
<span class="sd">Data Unit Structure</span>

<span class="sd">There are seven different PDUs</span>
<span class="sd">    A_ASSOCIATE_RQ</span>
<span class="sd">    A_ASSOCIATE_AC</span>
<span class="sd">    A_ASSOCIATE_RJ</span>
<span class="sd">    P_DATA_TF</span>
<span class="sd">    A_RELEASE_RQ</span>
<span class="sd">    A_RELEASE_RP</span>
<span class="sd">    A_ABORT_RQ</span>

<span class="sd">    All PDU classes implement the following methods:</span>

<span class="sd">      FromParams(DULServiceParameterObject):  Builds a PDU from a</span>
<span class="sd">                                              DULServiceParameter object.</span>
<span class="sd">                                              Used when receiving primitives</span>
<span class="sd">                                              from the DULServiceUser.</span>
<span class="sd">      ToParams()                   :  Convert the PDU into a</span>
<span class="sd">                                      DULServiceParameter object.</span>
<span class="sd">                                      Used for sending primitives to</span>
<span class="sd">                                      the DULServiceUser.</span>
<span class="sd">      Encode()                     :  Returns the encoded PDU as a string,</span>
<span class="sd">                                      ready to be sent over the net.</span>
<span class="sd">      Decode(bytestream)           :  Construct PDU from `bytestream`.</span>
<span class="sd">                                      Used for reading PDU&#39;s from the peer.</span>

<span class="sd">::</span>

<span class="sd">                        FromParams                 Encode</span>
<span class="sd">  |------------ -------| -------&gt;  |------------| -------&gt; |------------|</span>
<span class="sd">  | Service parameters |           |     PDU    |          |    TCP     |</span>
<span class="sd">  |       object       |           |   object   |          |   socket   |</span>
<span class="sd">  |____________________| &lt;-------  |____________| &lt;------- |____________|</span>
<span class="sd">                         ToParams                  Decode</span>


<span class="sd">TODO: Make encoding/decoding more generic</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="k">import</span> <span class="n">BytesIO</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">struct</span> <span class="k">import</span> <span class="n">pack</span><span class="p">,</span> <span class="n">unpack</span>

<span class="kn">from</span> <span class="nn">pydicom.uid</span> <span class="k">import</span> <span class="n">UID</span>

<span class="kn">from</span> <span class="nn">pynetdicom3.utils</span> <span class="k">import</span> <span class="n">pretty_bytes</span><span class="p">,</span> <span class="n">PresentationContext</span><span class="p">,</span> <span class="n">validate_ae_title</span>


<span class="n">LOGGER</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;pynetdicom3.pdu&#39;</span><span class="p">)</span>


<div class="viewcode-block" id="PDU"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PDU">[docs]</a><span class="k">class</span> <span class="nc">PDU</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Base class for PDUs &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Equality of two PDUs&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Inequality of two PDUs&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span>

<div class="viewcode-block" id="PDU.encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PDU.encode">[docs]</a>    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the DUL</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytes</span>
<span class="sd">            The encoded PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">no_formats</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">formats</span><span class="p">)</span>

        <span class="c1"># If a parameter is already a bytestring then determine its length</span>
        <span class="c1">#   and update the format</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">ff</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">formats</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">ff</span> <span class="o">==</span> <span class="s1">&#39;s&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="n">ii</span><span class="p">],</span> <span class="n">UID</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span> <span class="o">=</span> \
                        <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">formats</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0:d}</span><span class="s1">s&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="n">ii</span><span class="p">]))</span>
                <span class="c1"># Make sure the parameter is a bytes</span>

        <span class="c1"># Encode using Big Endian as per PS3.8 9.3.1 - PDU headers are Big</span>
        <span class="c1">#   Endian byte ordering while the encoding of PDV message fragments</span>
        <span class="c1">#   is defined by the negotiated Transfer Syntax</span>
        <span class="n">pack_format</span> <span class="o">=</span> <span class="s1">&#39;&gt; &#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">formats</span><span class="p">)</span>

        <span class="n">bytestream</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestream</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">pack_format</span><span class="p">,</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[:</span><span class="n">no_formats</span><span class="p">])</span>

        <span class="c1"># When we have more parameters then format we assume that the extra</span>
        <span class="c1">#   parameters is a list of objects needing their own encoding</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="n">no_formats</span><span class="p">:]:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">ii</span><span class="p">:</span>
                    <span class="n">bytestream</span> <span class="o">+=</span> <span class="n">item</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bytestream</span> <span class="o">+=</span> <span class="n">ii</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">bytestream</span></div>

<div class="viewcode-block" id="PDU.decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PDU.decode">[docs]</a>    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoded_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the binary encoded PDU and sets the PDU class&#39; values using the</span>
<span class="sd">        decoded data</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        encoded_data - ?</span>
<span class="sd">            The binary encoded PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        s = BytesIO(encoded_data)</span>

<span class="sd">        # We go through the PDU&#39;s parameters list and use the associated</span>
<span class="sd">        #   formats to decode the data</span>
<span class="sd">        for (value, fmt) in self.parameters:</span>
<span class="sd">            # Some PDUs have a parameter with unknown length</span>
<span class="sd">            #   ApplicationContextItem, AbstractSyntaxSubItem,</span>
<span class="sd">            #   PresentationDataValueItem, GenericUserDataSubItem*</span>
<span class="sd">            #   TransferSyntaxSubItem</span>

<span class="sd">            byte_size = calcsize(fmt)</span>
<span class="sd">            value = unpack(fmt, s.read(byte_size))</span>

<span class="sd">        # A_ASSOCIATE_RQ, A_ASSOCIATE_AC, P_DATA_TF and others may have</span>
<span class="sd">        # additional sub items requiring decoding</span>
<span class="sd">        while True:</span>
<span class="sd">            item = _next_item(s)</span>

<span class="sd">            if item is None:</span>
<span class="sd">                # Then the stream is empty so we break out of the loop</span>
<span class="sd">                break</span>

<span class="sd">            item.decode(s)</span>
<span class="sd">            self.additional_items.append(item)</span>

<span class="sd">        # After decoding, check that we have only added allowed items</span>
<span class="sd">        self.validate_additional_items()</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_next_item_type</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Peek at the stream `s` and see what PDU sub-item type</span>
<span class="sd">        it is by checking the value of the first byte, then reversing back to</span>
<span class="sd">        the start of the stream.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s : io.BytesIO</span>
<span class="sd">            The stream to peek</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int or None</span>
<span class="sd">            The first byte of the stream, None if the stream is empty.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">first_byte</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># If the stream is empty</span>
        <span class="k">if</span> <span class="n">first_byte</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Reverse our peek</span>
        <span class="n">s</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">first_byte</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">first_byte</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">first_byte</span>

    <span class="k">def</span> <span class="nf">_next_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Peek at the stream `s` and see what the next item type</span>
<span class="sd">        it is. Each valid PDU/item/subitem has an PDU-type/Item-type as the</span>
<span class="sd">        first byte, so we look at the first byte in the stream, then</span>
<span class="sd">        reverse back to the start of the stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s : io.BytesIO</span>
<span class="sd">            The stream to peek</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        PDU : pynetdicom3.pdu.PDU subclass</span>
<span class="sd">            A PDU subclass instance corresponding to the next item in the stream</span>
<span class="sd">        None</span>
<span class="sd">            If the stream is empty</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If the item type is not a known value</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">item_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_item_type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">item_types</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x01</span><span class="p">:</span> <span class="n">A_ASSOCIATE_RQ</span><span class="p">,</span>
                      <span class="mh">0x02</span><span class="p">:</span> <span class="n">A_ASSOCIATE_AC</span><span class="p">,</span>
                      <span class="mh">0x03</span><span class="p">:</span> <span class="n">A_ASSOCIATE_RJ</span><span class="p">,</span>
                      <span class="mh">0x04</span><span class="p">:</span> <span class="n">P_DATA_TF</span><span class="p">,</span>
                      <span class="mh">0x05</span><span class="p">:</span> <span class="n">A_RELEASE_RQ</span><span class="p">,</span>
                      <span class="mh">0x06</span><span class="p">:</span> <span class="n">A_RELEASE_RP</span><span class="p">,</span>
                      <span class="mh">0x07</span><span class="p">:</span> <span class="n">A_ABORT_RQ</span><span class="p">,</span>
                      <span class="mh">0x10</span><span class="p">:</span> <span class="n">ApplicationContextItem</span><span class="p">,</span>
                      <span class="mh">0x20</span><span class="p">:</span> <span class="n">PresentationContextItemRQ</span><span class="p">,</span>
                      <span class="mh">0x21</span><span class="p">:</span> <span class="n">PresentationContextItemAC</span><span class="p">,</span>
                      <span class="mh">0x30</span><span class="p">:</span> <span class="n">AbstractSyntaxSubItem</span><span class="p">,</span>
                      <span class="mh">0x40</span><span class="p">:</span> <span class="n">TransferSyntaxSubItem</span><span class="p">,</span>
                      <span class="mh">0x50</span><span class="p">:</span> <span class="n">UserInformationItem</span><span class="p">,</span>
                      <span class="mh">0x51</span><span class="p">:</span> <span class="n">MaximumLengthSubItem</span><span class="p">,</span>
                      <span class="mh">0x52</span><span class="p">:</span> <span class="n">ImplementationClassUIDSubItem</span><span class="p">,</span>
                      <span class="mh">0x53</span><span class="p">:</span> <span class="n">AsynchronousOperationsWindowSubItem</span><span class="p">,</span>
                      <span class="mh">0x54</span><span class="p">:</span> <span class="n">SCP_SCU_RoleSelectionSubItem</span><span class="p">,</span>
                      <span class="mh">0x55</span><span class="p">:</span> <span class="n">ImplementationVersionNameSubItem</span><span class="p">,</span>
                      <span class="mh">0x56</span><span class="p">:</span> <span class="n">SOPClassExtendedNegotiationSubItem</span><span class="p">,</span>
                      <span class="mh">0x57</span><span class="p">:</span> <span class="n">SOPClassCommonExtendedNegotiationSubItem</span><span class="p">,</span>
                      <span class="mh">0x58</span><span class="p">:</span> <span class="n">UserIdentitySubItemRQ</span><span class="p">,</span>
                      <span class="mh">0x59</span><span class="p">:</span> <span class="n">UserIdentitySubItemAC</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">item_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">item_types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;During PDU decoding we received an invalid &quot;</span>
                             <span class="s2">&quot;item type: </span><span class="se">\\</span><span class="s2">x</span><span class="si">{0:02x}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_type</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">item_types</span><span class="p">[</span><span class="n">item_type</span><span class="p">]()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the length of the encoded PDU.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Encode</span><span class="p">())</span></div>


<span class="c1"># PDU Classes</span>
<div class="viewcode-block" id="A_ASSOCIATE_RQ"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_RQ">[docs]</a><span class="k">class</span> <span class="nc">A_ASSOCIATE_RQ</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents an A-ASSOCIATE-RQ PDU.</span>

<span class="sd">    When encoded, is received from/sent to the peer AE.</span>

<span class="sd">    The A-ASSOCIATE-RQ PDU is sent at the start of association negotiation when</span>
<span class="sd">    either the local or the peer AE wants to to request an association.</span>

<span class="sd">    An A-ASSOCIATE-RQ requires the following parameters (see PS3.8 Section</span>
<span class="sd">    9.3.2):</span>

<span class="sd">        * PDU type (1, fixed value, 0x01)</span>
<span class="sd">        * PDU length (1)</span>
<span class="sd">        * Protocol version (1, fixed value, 0x01)</span>
<span class="sd">        * Called AE title (1)</span>
<span class="sd">        * Calling AE title (1)</span>
<span class="sd">        * Variable items (1)</span>

<span class="sd">          * Application Context Item (1)</span>
<span class="sd">            * Item type (1, fixed value, 0x10)</span>
<span class="sd">            * Item length (1)</span>
<span class="sd">            * Application Context Name (1, fixed in an application)</span>
<span class="sd">          * Presentation Context Item(s) (1 or more)</span>

<span class="sd">            * Item type (1, fixed value, 0x21)</span>
<span class="sd">            * Item length (1)</span>
<span class="sd">            * Context ID (1)</span>
<span class="sd">            * Abstract/Transfer Syntax Sub-items (1)</span>

<span class="sd">              * Abstract Syntax Sub-item (1)</span>
<span class="sd">                * Item type (1, fixed, 0x30)</span>
<span class="sd">                * Item length (1)</span>
<span class="sd">                * Abstract syntax name (1)</span>
<span class="sd">              * Transfer Syntax Sub-items (1 or more)</span>
<span class="sd">                * Item type (1, fixed, 0x40)</span>
<span class="sd">                * Item length (1)</span>
<span class="sd">                * Transfer syntax name(s) (1 or more)</span>
<span class="sd">          * User Information Item (1)</span>

<span class="sd">            * Item type (1, fixed, 0x50)</span>
<span class="sd">            * Item length (1)</span>
<span class="sd">            * User data Sub-items (2 or more)</span>

<span class="sd">                * Maximum Length Received Sub-item (1)</span>
<span class="sd">                * Implementation Class UID Sub-item (1)</span>
<span class="sd">                * Optional User Data Sub-items (0 or more)</span>

<span class="sd">    See PS3.8 Section 9.3.2 for the structure of the PDU, especially Table 9-11.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    application_context_name : pydicom.uid.UID</span>
<span class="sd">        The Association Requestor&#39;s Application Context Name as a UID. See</span>
<span class="sd">        PS3.8 9.3.2, 7.1.1.2</span>
<span class="sd">    called_ae_title : bytes</span>
<span class="sd">        The destination AE title as a 16-byte bytestring.</span>
<span class="sd">    calling_ae_title : bytes</span>
<span class="sd">        The source AE title as a 16-byte bytestring.</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded PDU in bytes</span>
<span class="sd">    presentation_context : list of pynetdicom3.pdu.PresentationContextItemRQ</span>
<span class="sd">        The A-ASSOCIATE-RQ&#39;s Presentation Context items</span>
<span class="sd">    user_information : pynetdicom3.pdu.UserInformationItem</span>
<span class="sd">        The A-ASSOCIATE-RQ&#39;s User Information item. See PS3.8 9.3.2, 7.1.1.6</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># These either have a fixed value or are set programatically</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span> <span class="o">=</span> <span class="mh">0x01</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span> <span class="o">=</span> <span class="mh">0x01</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">called_ae_title</span> <span class="o">=</span> <span class="s2">&quot;Default&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calling_ae_title</span> <span class="o">=</span> <span class="s2">&quot;Default&quot;</span>

        <span class="c1"># `variable_items` is a list containing the following:</span>
        <span class="c1">#   1 ApplicationContextItem</span>
        <span class="c1">#   1 or more PresentationContextItemRQ</span>
        <span class="c1">#   1 UserInformationItem</span>
        <span class="c1"># The order of the items in the list may not be as given above</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;16s&#39;</span><span class="p">,</span> <span class="s1">&#39;16s&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">called_ae_title</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">calling_ae_title</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">]</span>

<div class="viewcode-block" id="A_ASSOCIATE_RQ.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_RQ.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the PDU using the parameter values from the A-ASSOCIATE</span>
<span class="sd">        `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.A_ASSOCIATE</span>
<span class="sd">            The parameters to use for setting up the PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calling_ae_title</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">calling_ae_title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">called_ae_title</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">called_ae_title</span>

        <span class="c1"># Make Application Context</span>
        <span class="n">application_context</span> <span class="o">=</span> <span class="n">ApplicationContextItem</span><span class="p">()</span>
        <span class="n">application_context</span><span class="o">.</span><span class="n">FromParams</span><span class="p">(</span><span class="n">primitive</span><span class="o">.</span><span class="n">application_context_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">application_context</span><span class="p">)</span>

        <span class="c1"># Make Presentation Context(s)</span>
        <span class="k">for</span> <span class="n">contexts</span> <span class="ow">in</span> <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_context_definition_list</span><span class="p">:</span>
            <span class="n">presentation_context</span> <span class="o">=</span> <span class="n">PresentationContextItemRQ</span><span class="p">()</span>
            <span class="n">presentation_context</span><span class="o">.</span><span class="n">FromParams</span><span class="p">(</span><span class="n">contexts</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">presentation_context</span><span class="p">)</span>

        <span class="c1"># Make User Information</span>
        <span class="n">user_information</span> <span class="o">=</span> <span class="n">UserInformationItem</span><span class="p">()</span>
        <span class="n">user_information</span><span class="o">.</span><span class="n">FromParams</span><span class="p">(</span><span class="n">primitive</span><span class="o">.</span><span class="n">user_information</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user_information</span><span class="p">)</span>

        <span class="c1"># Set the pdu_length attribute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_pdu_length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="A_ASSOCIATE_RQ.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_RQ.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current A-ASSOCIATE-RQ PDU to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.DULparameters.A_ASSOCIATE_ServiceParameters</span>
<span class="sd">            The primitive to convert the PDU to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">A_ASSOCIATE</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_ASSOCIATE</span><span class="p">()</span>

        <span class="n">primitive</span><span class="o">.</span><span class="n">calling_ae_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calling_ae_title</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">called_ae_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">called_ae_title</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">application_context_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="c1"># Add presentation contexts</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">PresentationContextItemRQ</span><span class="p">):</span>
                <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_context_definition_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">ii</span><span class="o">.</span><span class="n">ToParams</span><span class="p">())</span>

            <span class="c1"># Add user information</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">UserInformationItem</span><span class="p">):</span>
                <span class="n">primitive</span><span class="o">.</span><span class="n">user_information</span> <span class="o">=</span> <span class="n">ii</span><span class="o">.</span><span class="n">ToParams</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="A_ASSOCIATE_RQ.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_RQ.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Encode the PDU&#39;s parameter values into a bytes string.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded PDU that will be sent to the peer AE</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Constructing Associate RQ PDU&#39;</span><span class="p">)</span>

        <span class="c1"># Encode the PDU parameters up to the Variable Items</span>
        <span class="c1">#   See PS3.8 Table 9-11</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B I H H 16s 16s 8I&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">called_ae_title</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">calling_ae_title</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">]</span>  <span class="c1"># Reserved</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>

        <span class="c1"># Encode the Variable Items</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">ii</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="A_ASSOCIATE_RQ.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_RQ.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestring</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the PDU from the bytes string sent</span>
<span class="sd">        by the peer AE</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The bytes string received from the peer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;PDU Type: Associate Request, PDU Length: </span><span class="si">%s</span><span class="s1"> + 6 bytes &#39;</span>
                     <span class="s1">&#39;PDU header&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bytestring</span><span class="p">)</span> <span class="o">-</span> <span class="mi">6</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">pretty_bytes</span><span class="p">(</span><span class="n">bytestring</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">):</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;  &#39;</span> <span class="o">+</span> <span class="n">line</span><span class="p">)</span>

        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Parsing an A-ASSOCIATE PDU&#39;</span><span class="p">)</span>

        <span class="c1"># Convert `bytestring` to a bytes stream to make things easier</span>
        <span class="c1">#   during decoding of the Variable Items section</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">bytestring</span><span class="p">)</span>

        <span class="c1"># Decode the A-ASSOCIATE-RQ PDU up to the Variable Items section</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">called_ae_title</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">calling_ae_title</span><span class="p">,</span>
         <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B I H H 16s 16s 32s&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">74</span><span class="p">))</span>

        <span class="c1"># Decode the Variable Items section of the PDU</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_item</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">item</span><span class="o">.</span><span class="n">Decode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_item</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">called_ae_title</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">calling_ae_title</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_update_pdu_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Determines the value of the PDU Length parameter.&quot;&quot;&quot;</span>
        <span class="c1"># Determine the total length of the PDU, this is the length from the</span>
        <span class="c1">#   first byte of the Protocol-version field (byte 7) to the end</span>
        <span class="c1">#   of the Variable items field (first byte is 75, unknown length)</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">68</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="n">ii</span><span class="o">.</span><span class="n">get_length</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span> <span class="o">=</span> <span class="n">length</span>

<div class="viewcode-block" id="A_ASSOCIATE_RQ.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_RQ.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the total length of the encoded PDU in bytes as an int.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_pdu_length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>

        <span class="k">return</span> <span class="mi">6</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">called_ae_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the called AE title.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_called_aet</span>

    <span class="nd">@called_ae_title</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">called_ae_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the Called-AE-title parameter to a 16-byte length byte string.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s : str or bytes</span>
<span class="sd">            The called AE title value you wish to set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_called_aet</span> <span class="o">=</span> <span class="n">validate_ae_title</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">calling_ae_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the calling AE title.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calling_aet</span>

    <span class="nd">@calling_ae_title</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">calling_ae_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the Calling-AE-title parameter to a 16-byte length byte string.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s : str or bytes</span>
<span class="sd">            The calling AE title value you wish to set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_calling_aet</span> <span class="o">=</span> <span class="n">validate_ae_title</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">application_context_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the application context name.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">ApplicationContextItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span><span class="o">.</span><span class="n">application_context_name</span>

    <span class="nd">@application_context_name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">application_context_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the Association request&#39;s Application Context Name.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value : pydicom.uid.UID, str or bytes</span>
<span class="sd">            The value of the Application Context Name&#39;s UID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">ApplicationContextItem</span><span class="p">):</span>
                <span class="n">ii</span><span class="o">.</span><span class="n">application_context_name</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">presentation_context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See PS3.8 9.3.2, 7.1.1.13</span>

<span class="sd">        A list of PresentationContextItemRQ. If extended negotiation Role</span>
<span class="sd">        Selection is used then the SCP/SCU roles will also be set.</span>

<span class="sd">        See the PresentationContextItemRQ and documentation for more information</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of pynetdicom3.pdu.PresentationContextItemRQ</span>
<span class="sd">            The Requestor AE&#39;s Presentation Context objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">contexts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">PresentationContextItemRQ</span><span class="p">):</span>
                <span class="c1"># We determine if there are any SCP/SCU Role Negotiations</span>
                <span class="c1">#   for each Transfer Syntax in each Presentation Context</span>
                <span class="c1">#   and if so we set the SCP and SCU attributes.</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">role_selection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># Iterate through the role negotiations looking for a</span>
                    <span class="c1">#   SOP Class match to the Abstract Syntax</span>
                    <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">role_selection</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">role</span><span class="o">.</span><span class="n">UID</span> <span class="o">==</span> <span class="n">ii</span><span class="o">.</span><span class="n">abstract_syntax</span><span class="p">:</span>
                            <span class="n">ii</span><span class="o">.</span><span class="n">SCP</span> <span class="o">=</span> <span class="n">role</span><span class="o">.</span><span class="n">SCP</span>
                            <span class="n">ii</span><span class="o">.</span><span class="n">SCU</span> <span class="o">=</span> <span class="n">role</span><span class="o">.</span><span class="n">SCU</span>
                <span class="n">contexts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">contexts</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user_information</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the user information item.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">UserInformationItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;A-ASSOCIATE-RQ PDU</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;==================</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU length: </span><span class="si">{0:d}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Protocol version: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Called AET:  </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">called_ae_title</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Calling AET: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">calling_ae_title</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Variable Items:</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  ---------------</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  * Application Context Item</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    - Context name: =</span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  * Presentation Context Item(s):</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context</span><span class="p">:</span>
            <span class="n">item_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="n">item_str_list</span> <span class="o">=</span> <span class="n">item_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    - </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_str_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">item_str_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;      </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  * User Information Item(s):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="n">item_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="n">item_str_list</span> <span class="o">=</span> <span class="n">item_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    - </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_str_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">item_str_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;      </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="A_ASSOCIATE_AC"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_AC">[docs]</a><span class="k">class</span> <span class="nc">A_ASSOCIATE_AC</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the A-ASSOCIATE-AC PDU that, when encoded, is received from/sent</span>
<span class="sd">    to the peer AE</span>

<span class="sd">    The A-ASSOCIATE-AC PDU is sent when the association request is accepted</span>
<span class="sd">    by either the local or the peer AE</span>

<span class="sd">    An A-ASSOCIATE-AC requires the following parameters (see PS3.8 Section</span>
<span class="sd">    9.3.2):</span>

<span class="sd">        * PDU type (1, fixed value, 0x02)</span>
<span class="sd">        * PDU length (1)</span>
<span class="sd">        * Protocol version (1, fixed value, 0x01)</span>
<span class="sd">        * Variable items (1)</span>

<span class="sd">          * Application Context Item (1)</span>

<span class="sd">            * Item type (1, fixed value, 0x10)</span>
<span class="sd">            * Item length (1)</span>
<span class="sd">            * Application Context Name (1, fixed in an application)</span>
<span class="sd">          * Presentation Context Item(s) (1 or more)</span>
<span class="sd">            * Item type (1, fixed value, 0x21)</span>
<span class="sd">            * Item length (1)</span>
<span class="sd">            StorageSOPClassList, \</span>
<span class="sd">                                 VerificationSOPClass, \</span>
<span class="sd">                                 QueryRetrieveSOPClassList* Context ID (1)</span>
<span class="sd">            * Transfer Syntax Sub-items (1)</span>

<span class="sd">              * Item type (1, fixed, 0x40)</span>
<span class="sd">              * Item length (1)</span>
<span class="sd">              * Transfer syntax name(s) (1)</span>
<span class="sd">          * User Information Item (1)</span>

<span class="sd">            * Item type (1, fixed, 0x50)</span>
<span class="sd">            * Item length (1)</span>
<span class="sd">            * User data Sub-items (2 or more)</span>

<span class="sd">                * Maximum Length Received Sub-item (1)</span>
<span class="sd">                * Implementation Class UID Sub-item (1)</span>
<span class="sd">                * Optional User Data Sub-items (0 or more)</span>

<span class="sd">    See PS3.8 Section 9.3.3 for the structure of the PDU, especially Table 9-17.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    application_context_name : pydicom.uid.UID</span>
<span class="sd">        The Association Requestor&#39;s Application Context Name as a UID. See</span>
<span class="sd">        PS3.8 9.3.2, 7.1.1.2</span>
<span class="sd">    called_ae_title : bytes</span>
<span class="sd">        The destination AE title as a 16-byte bytestring. The value is not</span>
<span class="sd">        guaranteed to be the actual title and shall not be tested.</span>
<span class="sd">    calling_ae_title : bytes</span>
<span class="sd">        The source AE title as a 16-byte bytestring. The value is not</span>
<span class="sd">        guaranteed to be the actual title and shall not be tested.</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded PDU in bytes</span>
<span class="sd">    presentation_context : list of pynetdicom3.pdu.PresentationContextItemAC</span>
<span class="sd">        The A-ASSOCIATE-AC&#39;s Presentation Context items</span>
<span class="sd">    user_information : pynetdicom3.pdu.UserInformationItem</span>
<span class="sd">        The A-ASSOCIATE-AC&#39;s User Information item. See PS3.8 9.3.2, 7.1.1.6</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># These either have a fixed value or are set programatically</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span> <span class="o">=</span> <span class="mh">0x02</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span> <span class="o">=</span> <span class="mh">0x01</span>

        <span class="c1"># Shall be set to called AE title value, but no guarantee</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aet</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Shall be set to calling AE title value, but no guarantee</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aec</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># variable_items is a list containing the following:</span>
        <span class="c1">#   1 ApplicationContextItem</span>
        <span class="c1">#   1 or more PresentationContextItemAC</span>
        <span class="c1">#   1 UserInformationItem</span>
        <span class="c1"># The order of the items in the list may not be as given above</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;16s&#39;</span><span class="p">,</span> <span class="s1">&#39;16s&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aet</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aec</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">]</span>

<div class="viewcode-block" id="A_ASSOCIATE_AC.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_AC.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the PDU using the parameter values from the A-ASSOCIATE</span>
<span class="sd">        `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.A_ASSOCIATE</span>
<span class="sd">            The parameters to use for setting up the PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aet</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">called_ae_title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aec</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">calling_ae_title</span>

        <span class="c1"># Make application context</span>
        <span class="n">application_context</span> <span class="o">=</span> <span class="n">ApplicationContextItem</span><span class="p">()</span>
        <span class="n">application_context</span><span class="o">.</span><span class="n">FromParams</span><span class="p">(</span><span class="n">primitive</span><span class="o">.</span><span class="n">application_context_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">application_context</span><span class="p">)</span>

        <span class="c1"># Make presentation contexts</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_context_definition_results_list</span><span class="p">:</span>
            <span class="n">presentation_context</span> <span class="o">=</span> <span class="n">PresentationContextItemAC</span><span class="p">()</span>
            <span class="n">presentation_context</span><span class="o">.</span><span class="n">FromParams</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">presentation_context</span><span class="p">)</span>

        <span class="c1"># Make user information</span>
        <span class="n">user_information</span> <span class="o">=</span> <span class="n">UserInformationItem</span><span class="p">()</span>
        <span class="n">user_information</span><span class="o">.</span><span class="n">FromParams</span><span class="p">(</span><span class="n">primitive</span><span class="o">.</span><span class="n">user_information</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user_information</span><span class="p">)</span>

        <span class="c1"># Compute PDU length parameter value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_pdu_length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="A_ASSOCIATE_AC.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_AC.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current A-ASSOCIATE-AC PDU to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.A_ASSOCIATE</span>
<span class="sd">            The primitive to convert the PDU to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">A_ASSOCIATE</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_ASSOCIATE</span><span class="p">()</span>

        <span class="c1"># The two reserved parameters at byte offsets 11 and 27 shall be set</span>
        <span class="c1">#    to called and calling AET byte the value shall not be</span>
        <span class="c1">#   tested when received (PS3.8 Table 9-17)</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">called_ae_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aet</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">calling_ae_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aec</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="c1"># Add application context</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">ApplicationContextItem</span><span class="p">):</span>
                <span class="n">primitive</span><span class="o">.</span><span class="n">application_context_name</span> <span class="o">=</span> <span class="n">ii</span><span class="o">.</span><span class="n">application_context_name</span>

            <span class="c1"># Add presentation contexts</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">PresentationContextItemAC</span><span class="p">):</span>
                <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_context_definition_results_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">ii</span><span class="o">.</span><span class="n">ToParams</span><span class="p">())</span>

            <span class="c1"># Add user information</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">UserInformationItem</span><span class="p">):</span>
                <span class="n">primitive</span><span class="o">.</span><span class="n">user_information</span> <span class="o">=</span> <span class="n">ii</span><span class="o">.</span><span class="n">ToParams</span><span class="p">()</span>

        <span class="c1"># 0x00 = Accepted</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="mh">0x00</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="A_ASSOCIATE_AC.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_AC.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the PDU&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded PDU that will be sent to the peer AE</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Constructing Associate AC PDU&#39;</span><span class="p">)</span>

        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B I H H 16s 16s 8I&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aet</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aec</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">]</span>  <span class="c1"># Reserved</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">ii</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="A_ASSOCIATE_AC.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_AC.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestring</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the PDU from the bytes string sent</span>
<span class="sd">        by the peer AE</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The bytes string received from the peer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;PDU Type: Associate Accept, PDU Length: </span><span class="si">%s</span><span class="s1"> + 6 bytes &#39;</span>
                     <span class="s1">&#39;PDU header&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bytestring</span><span class="p">)</span> <span class="o">-</span> <span class="mi">6</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">pretty_bytes</span><span class="p">(</span><span class="n">bytestring</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">512</span><span class="p">):</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;  &#39;</span> <span class="o">+</span> <span class="n">line</span><span class="p">)</span>

        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Parsing an A-ASSOCIATE PDU&#39;</span><span class="p">)</span>

        <span class="c1"># Convert `bytestring` to a bytes stream to make things easier</span>
        <span class="c1">#   during decoding of the Variable Items section</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">bytestring</span><span class="p">)</span>

        <span class="c1"># Decode the A-ASSOCIATE-AC PDU up to the Variable Items section</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aet</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aec</span><span class="p">,</span>
         <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B I H H 16s 16s 32s&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">74</span><span class="p">))</span>

        <span class="c1"># Decode the Variable Items section of the PDU</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_item</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">item</span><span class="o">.</span><span class="n">Decode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_item</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aet</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aec</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_update_pdu_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Determines the value of the PDU Length parameter &quot;&quot;&quot;</span>
        <span class="c1"># Determine the total length of the PDU, this is the length from the</span>
        <span class="c1">#   first byte of the Protocol-version field (byte 7) to the end</span>
        <span class="c1">#   of the Variable items field (first byte is 75, unknown length)</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">68</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="n">ii</span><span class="o">.</span><span class="n">get_length</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span> <span class="o">=</span> <span class="n">length</span>

<div class="viewcode-block" id="A_ASSOCIATE_AC.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_AC.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the length of the PDU.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_pdu_length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>

        <span class="k">return</span> <span class="mi">6</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">application_context_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See PS3.8 9.3.2, 7.1.1.2</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pydicom.uid.UID</span>
<span class="sd">            The Acceptor AE&#39;s Application Context Name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">ApplicationContextItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span><span class="o">.</span><span class="n">application_context_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">presentation_context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See PS3.8 9.3.2, 7.1.1.13</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of pynetdicom3.pdu.PresentationContextItemAC</span>

<span class="sd">            The Acceptor AE&#39;s Presentation Context objects. Each of the</span>
<span class="sd">            Presentation Context items instances in the list has been extended</span>
<span class="sd">            with two variables for tracking if SCP/SCU role negotiation has been</span>
<span class="sd">            accepted:</span>

<span class="sd">                SCP: Defaults to None if not used, 0 or 1 if used</span>
<span class="sd">                SCU: Defaults to None if not used, 0 or 1 if used</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">contexts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">PresentationContextItemAC</span><span class="p">):</span>
                <span class="c1"># We determine if there are any SCP/SCU Role Negotiations</span>
                <span class="c1">#   for each Transfer Syntax in each Presentation Context</span>
                <span class="c1">#   and if so we set the SCP and SCU attributes</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">role_selection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># Iterate through the role negotiations looking for a</span>
                    <span class="c1">#   SOP Class match to the Abstract Syntaxes</span>
                    <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">role_selection</span><span class="p">:</span>
                        <span class="c1"># -AC has no Abstract Syntax, not sure how to indicate</span>
                        <span class="c1">#   role selection</span>
                        <span class="c1"># FIXME</span>
                        <span class="k">pass</span>

                <span class="n">contexts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">contexts</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user_information</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See PS3.8 9.3.2, 7.1.1.6</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu.UserInformationItem</span>
<span class="sd">            The Acceptor AE&#39;s User Information object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">UserInformationItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">called_ae_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        While the standard says this value should match the A-ASSOCIATE-RQ</span>
<span class="sd">        value there is no guarantee and this should not be used as a check</span>
<span class="sd">        value</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytes</span>
<span class="sd">            The Requestor&#39;s AE Called AE Title</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ae_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aet</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ae_title</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">ae_title</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reserved_aet</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ae_title</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="k">return</span> <span class="n">ae_title</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">calling_ae_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        While the standard says this value should match the A-ASSOCIATE-RQ</span>
<span class="sd">        value there is no guarantee and this should not be used as a check</span>
<span class="sd">        value</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytes</span>
<span class="sd">            The Requestor&#39;s AE Calling AE Title</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ae_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reserved_aec</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ae_title</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">ae_title</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reserved_aec</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ae_title</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="k">return</span> <span class="n">ae_title</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;A-ASSOCIATE-AC PDU</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;==================</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU length: </span><span class="si">{0:d}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Protocol version: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">protocol_version</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Reserved (Called AET):  </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reserved_aet</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Reserved (Calling AET): </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reserved_aec</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Variable Items:</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  ---------------</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  * Application Context Item</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    -  Context name: =</span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  * Presentation Context Item(s):</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context</span><span class="p">:</span>
            <span class="n">item_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="n">item_str_list</span> <span class="o">=</span> <span class="n">item_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    -  </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_str_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">item_str_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;       </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  * User Information Item(s):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_information</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="n">item_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="n">item_str_list</span> <span class="o">=</span> <span class="n">item_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    -  </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_str_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">item_str_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;       </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="A_ASSOCIATE_RJ"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_RJ">[docs]</a><span class="k">class</span> <span class="nc">A_ASSOCIATE_RJ</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the A-ASSOCIATE-RJ PDU that, when encoded, is received from/sent</span>
<span class="sd">    to the peer AE.</span>

<span class="sd">    The A-ASSOCIATE-RJ PDU is sent during association negotiation when</span>
<span class="sd">    either the local or the peer AE rejects the association request.</span>

<span class="sd">    An A-ASSOCIATE-RJ requires the following parameters (see PS3.8 Section</span>
<span class="sd">        9.3.4):</span>
<span class="sd">        * PDU type (1, fixed value, 0x03)</span>
<span class="sd">        * PDU length (1)</span>
<span class="sd">        * Result (1)</span>
<span class="sd">        * Source (1)</span>
<span class="sd">        * Reason/Diagnostic (1)</span>

<span class="sd">    See PS3.8 Section 9.3.4 for the structure of the PDU, especially Table 9-21.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded PDU in bytes</span>
<span class="sd">    reason : int</span>
<span class="sd">        The raw Reason/Diagnostic parameter value</span>
<span class="sd">    reason_str : str</span>
<span class="sd">        The reason for the rejection as a string</span>
<span class="sd">    result : int</span>
<span class="sd">        The raw Result parameter value</span>
<span class="sd">    result_str : str</span>
<span class="sd">        The result of the rejection, one of (&#39;Rejected (Permanent)&#39;,</span>
<span class="sd">        &#39;Rejected (Transient)&#39;)</span>
<span class="sd">    source : int</span>
<span class="sd">        The raw Source parameter value</span>
<span class="sd">    source_str : str</span>
<span class="sd">        The source of the rejection, one of (&#39;DUL service-user&#39;,</span>
<span class="sd">        &#39;DUL service-provider (ACSE related)&#39;, &#39;DUL service-provider</span>
<span class="sd">        (presentation related)&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span> <span class="o">=</span> <span class="mh">0x03</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span> <span class="o">=</span> <span class="mh">0x04</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span><span class="p">]</span>

<div class="viewcode-block" id="A_ASSOCIATE_RJ.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_RJ.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the PDU using the parameter values from the A-ASSOCIATE</span>
<span class="sd">        `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.A_ASSOCIATE</span>
<span class="sd">            The parameters to use for setting up the PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">result</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">result_source</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">diagnostic</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="A_ASSOCIATE_RJ.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_RJ.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current A-ASSOCIATE-RQ PDU to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.A_ASSOCIATE</span>
<span class="sd">            The primitive to convert the PDU to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">A_ASSOCIATE</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_ASSOCIATE</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">result_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">diagnostic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="A_ASSOCIATE_RJ.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_RJ.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the PDU&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded PDU that will be sent to the peer AE</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Constructing Associate RJ PDU&#39;</span><span class="p">)</span>

        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B I B B B B&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="A_ASSOCIATE_RJ.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_RJ.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestring</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the PDU from the bytes string sent</span>
<span class="sd">        by the peer AE</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The bytes string received from the peer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B I B B B B&#39;</span><span class="p">,</span> <span class="n">bytestring</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the PDU parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span><span class="p">]</span>

<div class="viewcode-block" id="A_ASSOCIATE_RJ.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ASSOCIATE_RJ.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The total length of the encoded PDU in bytes .&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">10</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the Result parameter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_result</span>

    <span class="nd">@result</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the Result parameter.&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_result</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">result_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the Result parameter in the form of a string.&quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;Rejected (Permanent)&#39;</span><span class="p">,</span>
                   <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Rejected (Transient)&#39;</span><span class="p">}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Invalid value in Result parameter in &#39;</span>
                         <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid value in Result parameter in &#39;</span>
                             <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">results</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the Source parameter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_source</span>

    <span class="nd">@source</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the source parameter.&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_source</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">source_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the source parameter in the form of a string.&quot;&quot;&quot;</span>
        <span class="n">sources</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;DUL service-user&#39;</span><span class="p">,</span>
                   <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;DUL service-provider (ACSE related)&#39;</span><span class="p">,</span>
                   <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;DUL service-provider (presentation related)&#39;</span><span class="p">}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sources</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Invalid value in Source parameter in &#39;</span>
                         <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid value in Source parameter in &#39;</span>
                             <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">sources</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">reason_diagnostic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the reason diagnostic parameter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reason</span>

    <span class="nd">@reason_diagnostic</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">reason_diagnostic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the reason diagnostic parameter.&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reason</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">reason_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a string describing the reason parameter.&quot;&quot;&quot;</span>
        <span class="n">reasons</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;No reason given&quot;</span><span class="p">,</span>
                       <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;Application context name not supported&quot;</span><span class="p">,</span>
                       <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;Calling AE title not recognised&quot;</span><span class="p">,</span>
                       <span class="mi">4</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                       <span class="mi">5</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                       <span class="mi">6</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                       <span class="mi">7</span><span class="p">:</span> <span class="s2">&quot;Called AE title not recognised&quot;</span><span class="p">,</span>
                       <span class="mi">8</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                       <span class="mi">9</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                       <span class="mi">10</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">},</span>
                   <span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;No reason given&quot;</span><span class="p">,</span>
                       <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;Protocol version not supported&quot;</span><span class="p">},</span>
                   <span class="mi">3</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                       <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;Temporary congestion&quot;</span><span class="p">,</span>
                       <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;Local limit exceeded&quot;</span><span class="p">,</span>
                       <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                       <span class="mi">4</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                       <span class="mi">5</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                       <span class="mi">6</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                       <span class="mi">7</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">}}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">reasons</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Invalid value in Source parameter in &#39;</span>
                         <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid value in Source parameter in &#39;</span>
                             <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>

        <span class="n">source_reasons</span> <span class="o">=</span> <span class="n">reasons</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">source_reasons</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Invalid value in Reason parameter in &#39;</span>
                         <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid value in Reason parameter in &#39;</span>
                             <span class="s1">&#39;A-ASSOCIATE-RJ PDU&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">source_reasons</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;A-ASSOCIATE-RJ PDU</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;==================</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU length: </span><span class="si">{0:d}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Result: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result_str</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Source: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_str</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Reason/Diagnostic: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reason_str</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="P_DATA_TF"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.P_DATA_TF">[docs]</a><span class="k">class</span> <span class="nc">P_DATA_TF</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the P-DATA-TF PDU that, when encoded, is received from/sent</span>
<span class="sd">    to the peer AE.</span>

<span class="sd">    The P-DATA-TF PDU contains data to be transmitted between two associated</span>
<span class="sd">    AEs.</span>

<span class="sd">    A P-DATA-TF requires the following parameters (see PS3.8 Section</span>
<span class="sd">        9.3.5):</span>
<span class="sd">        * PDU type (1, fixed value, 0x04)</span>
<span class="sd">        * PDU length (1)</span>
<span class="sd">        * Presentation data value Item(s) (1 or more)</span>

<span class="sd">    See PS3.8 Section 9.3.5 for the structure of the PDU, especially Table 9-22.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded PDU in bytes</span>
<span class="sd">    PDVs : list of pynetdicom3.pdu.PresentationDataValueItem</span>
<span class="sd">        The presentation data value items</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span> <span class="o">=</span> <span class="mh">0x04</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span><span class="p">]</span>

<div class="viewcode-block" id="P_DATA_TF.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.P_DATA_TF.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the PDU using the parameter values from the P-DATA `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.P_DATA</span>
<span class="sd">            The parameters to use for setting up the PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_data_value_list</span><span class="p">:</span>
            <span class="n">presentation_data_value</span> <span class="o">=</span> <span class="n">PresentationDataValueItem</span><span class="p">()</span>
            <span class="n">presentation_data_value</span><span class="o">.</span><span class="n">FromParams</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">presentation_data_value</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_pdu_length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="P_DATA_TF.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.P_DATA_TF.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current P-DATA-TF PDU to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.P_DATA</span>
<span class="sd">            The primitive to convert the PDU to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">P_DATA</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">P_DATA</span><span class="p">()</span>

        <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_data_value_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span><span class="p">:</span>
            <span class="n">primitive</span><span class="o">.</span><span class="n">presentation_data_value_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">[</span><span class="n">ii</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span> <span class="n">ii</span><span class="o">.</span><span class="n">presentation_data_value</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="P_DATA_TF.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.P_DATA_TF.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the PDU&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded PDU that will be sent to the peer AE</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B I&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span><span class="p">:</span>
            <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">ii</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="P_DATA_TF.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.P_DATA_TF.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestring</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the PDU from the bytes string sent</span>
<span class="sd">        by the peer AE</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The bytes string received from the peer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Convert `bytestring` to a bytes stream to make things easier</span>
        <span class="c1">#   during decoding of the Presentation Data Value Items section</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">bytestring</span><span class="p">)</span>

        <span class="c1"># Decode the P-DATA-TF PDU up to the Presentation</span>
        <span class="c1">#   Data Value Items section</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B I&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>

        <span class="c1"># Decode the Presentation Data Value Items section</span>
        <span class="n">length_read</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">length_read</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">:</span>
            <span class="n">pdv_item</span> <span class="o">=</span> <span class="n">PresentationDataValueItem</span><span class="p">()</span>
            <span class="n">pdv_item</span><span class="o">.</span><span class="n">Decode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

            <span class="n">length_read</span> <span class="o">+=</span> <span class="n">pdv_item</span><span class="o">.</span><span class="n">get_length</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pdv_item</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the PDU parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_update_pdu_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the PDU length parameter.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span> <span class="o">+=</span> <span class="n">ii</span><span class="o">.</span><span class="n">get_length</span><span class="p">()</span>

<div class="viewcode-block" id="P_DATA_TF.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.P_DATA_TF.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the length of the PDU.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_pdu_length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">6</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">PDVs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the PDVs.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;P-DATA-TF PDU</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;=============</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU length: </span><span class="si">{0:d}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Presentation Data Value Item(s):</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  --------------------------------</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value_items</span><span class="p">:</span>
            <span class="n">item_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="n">item_str_list</span> <span class="o">=</span> <span class="n">item_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  *  </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_str_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">item_str_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;     </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="A_RELEASE_RQ"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_RELEASE_RQ">[docs]</a><span class="k">class</span> <span class="nc">A_RELEASE_RQ</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the A-RELEASE-RQ PDU that, when encoded, is received from/sent</span>
<span class="sd">    to the peer AE.</span>

<span class="sd">    The A-RELEASE-RQ PDU requests that the association be released</span>

<span class="sd">    A A-RELEASE-RQ requires the following parameters (see PS3.8 Section</span>
<span class="sd">        9.3.6):</span>
<span class="sd">        * PDU type (1, fixed value, 0x05)</span>
<span class="sd">        * PDU length (1)</span>

<span class="sd">    See PS3.8 Section 9.3.6 for the structure of the PDU, especially Table 9-24.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded PDU in bytes</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span> <span class="o">=</span> <span class="mh">0x05</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span> <span class="o">=</span> <span class="mh">0x04</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="mh">0x0000</span><span class="p">]</span>  <span class="c1"># Reserved</span>

<div class="viewcode-block" id="A_RELEASE_RQ.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_RELEASE_RQ.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the PDU using the parameter values from the A-RELEASE `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.A_RELEASE</span>
<span class="sd">            The parameters to use for setting up the PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="A_RELEASE_RQ.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_RELEASE_RQ.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current A-RELEASE-RQ PDU to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.A_RELEASE</span>
<span class="sd">            The primitive to convert the PDU to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">A_RELEASE</span>
        <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_RELEASE</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="A_RELEASE_RQ.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_RELEASE_RQ.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the PDU&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded PDU that will be sent to the peer AE</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B I I&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                      <span class="mh">0x0000</span><span class="p">]</span>  <span class="c1"># Reserved</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="A_RELEASE_RQ.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_RELEASE_RQ.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestring</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the PDU from the bytes string sent</span>
<span class="sd">        by the peer AE</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The bytes string received from the peer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Decode the A-RELEASE-RQ PDU</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
         <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B I I&#39;</span><span class="p">,</span> <span class="n">bytestring</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the PDU parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="mh">0x0000</span><span class="p">]</span>  <span class="c1"># Reserved</span>

<div class="viewcode-block" id="A_RELEASE_RQ.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_RELEASE_RQ.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the PDU length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">10</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;A-RELEASE-RQ PDU</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;================</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU length: </span><span class="si">{0:d}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="A_RELEASE_RP"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_RELEASE_RP">[docs]</a><span class="k">class</span> <span class="nc">A_RELEASE_RP</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the A-RELEASE-RP PDU that, when encoded, is received from/sent</span>
<span class="sd">    to the peer AE.</span>

<span class="sd">    The A-RELEASE-RP PDU confirms that the association will be released</span>

<span class="sd">    A A-RELEASE-RP requires the following parameters (see PS3.8 Section</span>
<span class="sd">        9.3.7):</span>
<span class="sd">        * PDU type (1, fixed value, 0x06)</span>
<span class="sd">        * PDU length (1)</span>

<span class="sd">    See PS3.8 Section 9.3.7 for the structure of the PDU, especially Table 9-25.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded PDU in bytes</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span> <span class="o">=</span> <span class="mh">0x06</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span> <span class="o">=</span> <span class="mh">0x04</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="mh">0x0000</span><span class="p">]</span>  <span class="c1"># Reserved</span>

<div class="viewcode-block" id="A_RELEASE_RP.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_RELEASE_RP.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the PDU using the parameter values from the A-RELEASE `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.A_RELEASE</span>
<span class="sd">            The parameters to use for setting up the PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="A_RELEASE_RP.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_RELEASE_RP.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current A-RELEASE-RP PDU to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.A_RELEASE</span>
<span class="sd">            The primitive to convert the PDU to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">A_RELEASE</span>
        <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_RELEASE</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="s1">&#39;affirmative&#39;</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="A_RELEASE_RP.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_RELEASE_RP.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the PDU&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded PDU that will be sent to the peer AE</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B I I&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                      <span class="mh">0x0000</span><span class="p">]</span>  <span class="c1"># Reserved</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="A_RELEASE_RP.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_RELEASE_RP.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestring</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the PDU from the bytes string sent</span>
<span class="sd">        by the peer AE</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The bytes string received from the peer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Decode the A-RELEASE-RP PDU</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
         <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B I I&#39;</span><span class="p">,</span> <span class="n">bytestring</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the PDU parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="mh">0x0000</span><span class="p">]</span>  <span class="c1"># Reserved</span>

<div class="viewcode-block" id="A_RELEASE_RP.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_RELEASE_RP.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the PDU length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">10</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;A-RELEASE-RP PDU</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;================</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  PDU length: </span><span class="si">{0:d}</span><span class="s1"> bytes</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="A_ABORT_RQ"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ABORT_RQ">[docs]</a><span class="k">class</span> <span class="nc">A_ABORT_RQ</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the A-ABORT PDU that, when encoded, is received from/sent</span>
<span class="sd">    to the peer AE.</span>

<span class="sd">    The A-ABORT PDU signals that the association will be aborted</span>

<span class="sd">    A A-ABORT requires the following parameters (see PS3.8 Section</span>
<span class="sd">        9.3.8):</span>
<span class="sd">        * PDU type (1, fixed value, 0x06)</span>
<span class="sd">        * PDU length (1)</span>
<span class="sd">        * Source (1)</span>
<span class="sd">        * Reason/Diagnostic (1)</span>

<span class="sd">    See PS3.8 Section 9.3.7 for the structure of the PDU, especially Table 9-25.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded PDU in bytes</span>
<span class="sd">    reason_str : str</span>
<span class="sd">        The reason for the abort</span>
<span class="sd">    source_str : str</span>
<span class="sd">        The source of the abort, one of (&#39;DUL service-user&#39;,</span>
<span class="sd">        &#39;DUL service-provider&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span> <span class="o">=</span> <span class="mh">0x07</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span> <span class="o">=</span> <span class="mh">0x04</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span><span class="p">]</span>  <span class="c1"># Reserved</span>

<div class="viewcode-block" id="A_ABORT_RQ.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ABORT_RQ.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the PDU using the parameter values from the A-RELEASE `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.A_ABORT or</span>
<span class="sd">        pynetdicom3.pdu_primitives.A_P_ABORT</span>
<span class="sd">            The parameters to use for setting up the PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">A_ABORT</span><span class="p">,</span> <span class="n">A_P_ABORT</span>

        <span class="c1"># User initiated abort</span>
        <span class="k">if</span> <span class="n">primitive</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">A_ABORT</span><span class="p">:</span>
            <span class="c1"># The reason field shall be 0x00 when the source is DUL service-user</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">abort_source</span>

        <span class="c1"># User provider primitive abort</span>
        <span class="k">elif</span> <span class="n">primitive</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">A_P_ABORT</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">provider_reason</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="A_ABORT_RQ.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ABORT_RQ.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current A-ABORT PDU to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.A_ABORT_ServiceParameters or</span>
<span class="sd">        pynetdicom3.pdu_primitives.A_P_ABORT_ServiceParameters</span>
<span class="sd">            The primitive to convert the PDU to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">A_ABORT</span><span class="p">,</span> <span class="n">A_P_ABORT</span>

        <span class="c1"># User initiated abort</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="mh">0x00</span><span class="p">:</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_ABORT</span><span class="p">()</span>
            <span class="n">primitive</span><span class="o">.</span><span class="n">abort_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span>

        <span class="c1"># User provider primitive abort</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="mh">0x02</span><span class="p">:</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">A_P_ABORT</span><span class="p">()</span>
            <span class="n">primitive</span><span class="o">.</span><span class="n">provider_reason</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="A_ABORT_RQ.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ABORT_RQ.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the PDU&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded PDU that will be sent to the peer AE</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B I B B B B&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="A_ABORT_RQ.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ABORT_RQ.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestring</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the PDU from the bytes string sent</span>
<span class="sd">        by the peer AE</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The bytes string received from the peer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Decode the A-ABORT PDU</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B I B B B B&#39;</span><span class="p">,</span> <span class="n">bytestring</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the PDU parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span><span class="p">]</span>  <span class="c1"># Reserved</span>

<div class="viewcode-block" id="A_ABORT_RQ.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.A_ABORT_RQ.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the PDU length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">10</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;A-ABORT PDU</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;===========</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  PDU type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  PDU length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pdu_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Abort Source: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_str</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Reason/Diagnostic: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reason_str</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">source_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See PS3.8 9.3.8</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The source of the Association abort</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sources</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;DUL service-user&#39;</span><span class="p">,</span>
                   <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;Reserved&#39;</span><span class="p">,</span>
                   <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;DUL service-provider&#39;</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">sources</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">reason_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See PS3.8 9.3.8</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The reason given for the Association abort</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">reason_str</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s2">&quot;No reason given&quot;</span><span class="p">,</span>
                          <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;Unrecognised PDU&quot;</span><span class="p">,</span>
                          <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;Unexpected PDU&quot;</span><span class="p">,</span>
                          <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;Reserved&quot;</span><span class="p">,</span>
                          <span class="mi">4</span><span class="p">:</span> <span class="s2">&quot;Unrecognised PDU parameter&quot;</span><span class="p">,</span>
                          <span class="mi">5</span><span class="p">:</span> <span class="s2">&quot;Unexpected PDU parameter&quot;</span><span class="p">,</span>
                          <span class="mi">6</span><span class="p">:</span> <span class="s2">&quot;Invalid PDU parameter value&quot;</span><span class="p">}</span>
            <span class="k">return</span> <span class="n">reason_str</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">reason_diagnostic</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;No reason given&#39;</span></div>


<span class="c1"># PDU Item Classes</span>
<div class="viewcode-block" id="ApplicationContextItem"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ApplicationContextItem">[docs]</a><span class="k">class</span> <span class="nc">ApplicationContextItem</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the Application Context Item used in A-ASSOCIATE-RQ and</span>
<span class="sd">    A-ASSOCIATE-AC PDUs.</span>

<span class="sd">    The Application Context Item requires the following parameters (see PS3.8</span>
<span class="sd">    Section 9.3.2.1):</span>

<span class="sd">        * Item type (1, fixed value, 0x10)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Application Context Name (1, fixed in an application)</span>

<span class="sd">    See PS3.8 Section 9.3.2.1 for the structure of the PDU, especially</span>
<span class="sd">    Table 9-12.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items</span>
<span class="sd">    Used in A_ASSOCIATE_AC - Variable items</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    application_context_name : pydicom.uid.UID</span>
<span class="sd">        The UID for the Application Context Name</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x10</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span><span class="p">]</span>

<div class="viewcode-block" id="ApplicationContextItem.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ApplicationContextItem.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pydicom.uid.UID, bytes, str or None</span>
<span class="sd">            The UID value to use for the Application Context Name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span> <span class="o">=</span> <span class="n">primitive</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="ApplicationContextItem.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ApplicationContextItem.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pydicom.uid.UID</span>
<span class="sd">            The Application Context Name&#39;s UID value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span></div>

<div class="viewcode-block" id="ApplicationContextItem.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ApplicationContextItem.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="ApplicationContextItem.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ApplicationContextItem.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the PDU parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span><span class="p">]</span>

<div class="viewcode-block" id="ApplicationContextItem.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ApplicationContextItem.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the PDU length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1"> (</span><span class="si">{1!s}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span><span class="p">,</span>
                                     <span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span><span class="o">.</span><span class="n">title</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">application_context_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the Application Context Name as a pydicom.uid.UID.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_application_context_name</span>

    <span class="nd">@application_context_name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">application_context_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the application context name.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value : pydicom.uid.UID, str or bytes</span>
<span class="sd">            The value of the Application Context Name&#39;s UID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">UID</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Application Context Name must be a UID, &#39;</span>
                            <span class="s1">&#39;str or bytes&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_application_context_name</span> <span class="o">=</span> <span class="n">value</span>

        <span class="c1"># Update the item_length parameter to account fo the new value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">application_context_name</span><span class="p">)</span></div>


<div class="viewcode-block" id="PresentationContextItemRQ"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationContextItemRQ">[docs]</a><span class="k">class</span> <span class="nc">PresentationContextItemRQ</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Presentation Context Item used in A-ASSOCIATE-RQ PDUs.</span>

<span class="sd">    The Presentation Context Item requires the following parameters (see PS3.8</span>
<span class="sd">    Section 9.3.2.2):</span>

<span class="sd">        * Item type (1, fixed value, 0x20)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Presentation context ID (1)</span>
<span class="sd">        * Abstract/Transfer Syntax Sub-items (1)</span>

<span class="sd">          * Abstract Syntax Sub-item (1)</span>

<span class="sd">            * Item type (1, fixed, 0x30)</span>
<span class="sd">            * Item length (1)</span>
<span class="sd">            * Abstract syntax name (1)</span>
<span class="sd">          * Transfer Syntax Sub-items (1 or more)</span>

<span class="sd">            * Item type (1, fixed, 0x40)</span>
<span class="sd">            * Item length (1)</span>
<span class="sd">            * Transfer syntax name(s) (1 or more)</span>

<span class="sd">    See PS3.8 Section 9.3.2.2 for the structure of the item, especially</span>
<span class="sd">    Table 9-13.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    abstract_syntax : pydicom.uid.UID</span>
<span class="sd">        The presentation context&#39;s Abstract Syntax value</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    ID : int</span>
<span class="sd">        The presentation context&#39;s ID</span>
<span class="sd">    transfer_syntax : list of pydicom.uid.UID</span>
<span class="sd">        The presentation context&#39;s Transfer Syntax(es)</span>

<span class="sd">    SCP : None or int</span>
<span class="sd">        Defaults to None if SCP/SCU role negotiation not used, 0 or 1 if used</span>
<span class="sd">    SCU : None or int</span>
<span class="sd">        Defaults to None if SCP/SCU role negotiation not used, 0 or 1 if used</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x20</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># AbstractTransferSyntaxSubItems is a list</span>
        <span class="c1"># containing the following elements:</span>
        <span class="c1">#   One AbstractSyntaxtSubItem</span>
        <span class="c1">#   One or more TransferSyntaxSubItem</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abstract_transfer_syntax_sub_items</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Non-standard parameters</span>
        <span class="c1">#   Used for tracking SCP/SCU Role Negotiation</span>
        <span class="c1"># Consider shifting to properties?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SCP</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SCU</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">abstract_transfer_syntax_sub_items</span><span class="p">]</span>  <span class="c1"># Reserved</span>

<div class="viewcode-block" id="PresentationContextItemRQ.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationContextItemRQ.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.utils.PresentationContext</span>
<span class="sd">            The PresentationContext object to use to setup the Item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Add presentation context ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">ID</span>

        <span class="c1"># Add abstract syntax</span>
        <span class="n">abstract_syntax</span> <span class="o">=</span> <span class="n">AbstractSyntaxSubItem</span><span class="p">()</span>
        <span class="n">abstract_syntax</span><span class="o">.</span><span class="n">FromParams</span><span class="p">(</span><span class="n">primitive</span><span class="o">.</span><span class="n">AbstractSyntax</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abstract_transfer_syntax_sub_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abstract_syntax</span><span class="p">)</span>

        <span class="c1"># Add transfer syntax(es)</span>
        <span class="k">for</span> <span class="n">syntax</span> <span class="ow">in</span> <span class="n">primitive</span><span class="o">.</span><span class="n">TransferSyntax</span><span class="p">:</span>
            <span class="n">transfer_syntax</span> <span class="o">=</span> <span class="n">TransferSyntaxSubItem</span><span class="p">()</span>
            <span class="n">transfer_syntax</span><span class="o">.</span><span class="n">FromParams</span><span class="p">(</span><span class="n">syntax</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">abstract_transfer_syntax_sub_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">transfer_syntax</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">get_length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="PresentationContextItemRQ.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationContextItemRQ.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.utils.PresentationContext</span>
<span class="sd">            The primitive to covert the Item to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">PresentationContext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">)</span>

        <span class="c1"># Add transfer syntax(es)</span>
        <span class="k">for</span> <span class="n">syntax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">abstract_transfer_syntax_sub_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">syntax</span><span class="p">,</span> <span class="n">TransferSyntaxSubItem</span><span class="p">):</span>
                <span class="n">context</span><span class="o">.</span><span class="n">add_transfer_syntax</span><span class="p">(</span><span class="n">syntax</span><span class="o">.</span><span class="n">ToParams</span><span class="p">())</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">syntax</span><span class="p">,</span> <span class="n">AbstractSyntaxSubItem</span><span class="p">):</span>
                <span class="n">context</span><span class="o">.</span><span class="n">AbstractSyntax</span> <span class="o">=</span> <span class="n">syntax</span><span class="o">.</span><span class="n">ToParams</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">context</span></div>

<div class="viewcode-block" id="PresentationContextItemRQ.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationContextItemRQ.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H B B B B&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="mh">0x00</span><span class="p">]</span>  <span class="c1"># Reserved</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">abstract_transfer_syntax_sub_items</span><span class="p">:</span>
            <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">ii</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="PresentationContextItemRQ.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationContextItemRQ.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Decode the Item parameters up to the Abstract/Transfer Syntax</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B H B B B B&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>

        <span class="c1"># Decode the Abstract/Transfer Syntax Sub-items</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_item</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)</span>
        <span class="k">while</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">AbstractSyntaxSubItem</span><span class="p">)</span> <span class="ow">or</span> \
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">TransferSyntaxSubItem</span><span class="p">):</span>
            <span class="n">item</span><span class="o">.</span><span class="n">Decode</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">abstract_transfer_syntax_sub_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_item</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the PDU parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">abstract_transfer_syntax_sub_items</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_update_item_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the PDU length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">4</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">abstract_transfer_syntax_sub_items</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">+=</span> <span class="n">ii</span><span class="o">.</span><span class="n">length</span>

<div class="viewcode-block" id="PresentationContextItemRQ.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationContextItemRQ.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the PDU length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_item_length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;Presentation Context (RQ) Item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Context ID: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCP</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  SCP Role: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SCP</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">SCU</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  SCU Role: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SCU</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">abstract_transfer_syntax_sub_items</span><span class="p">:</span>
            <span class="n">item_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>
            <span class="n">item_str_list</span> <span class="o">=</span> <span class="n">item_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  + </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_str_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">item_str_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;    </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See PS3.8 9.3.2.2</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            Odd number between 1 and 255 (inclusive)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">abstract_syntax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the abstract syntax.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">abstract_transfer_syntax_sub_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">AbstractSyntaxSubItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span><span class="o">.</span><span class="n">abstract_syntax_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">transfer_syntax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the transfer syntaxes.&quot;&quot;&quot;</span>
        <span class="n">syntaxes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">abstract_transfer_syntax_sub_items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">TransferSyntaxSubItem</span><span class="p">):</span>
                <span class="n">syntaxes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ii</span><span class="o">.</span><span class="n">transfer_syntax_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">syntaxes</span></div>


<div class="viewcode-block" id="PresentationContextItemAC"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationContextItemAC">[docs]</a><span class="k">class</span> <span class="nc">PresentationContextItemAC</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Presentation Context Item used in A-ASSOCIATE-AC PDUs.</span>

<span class="sd">    The Presentation Context Item requires the following parameters (see PS3.8</span>
<span class="sd">    Section 9.3.3.2):</span>

<span class="sd">        * Item type (1, fixed value, 0x21)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Presentation context ID (1)</span>
<span class="sd">        * Result/reason (1)</span>
<span class="sd">        * Transfer Syntax Sub-item (1)</span>

<span class="sd">          * Item type (1, fixed, 0x40)</span>
<span class="sd">          * Item length (1)</span>
<span class="sd">          * Transfer syntax name (1)</span>

<span class="sd">    See PS3.8 Section 9.3.3.2 for the structure of the item, especially</span>
<span class="sd">    Table 9-18.</span>

<span class="sd">    Used in A_ASSOCIATE_AC - Variable items</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    ID : int</span>
<span class="sd">        The presentation context&#39;s ID</span>
<span class="sd">    result : int</span>
<span class="sd">        The presentation context&#39;s result/reason value</span>
<span class="sd">    result_str : str</span>
<span class="sd">        The result as a string, one of (&#39;Accepted&#39;, &#39;User Rejected&#39;,</span>
<span class="sd">        &#39;No Reason&#39;, &#39;Abstract Syntax Not Supported&#39;,</span>
<span class="sd">        &#39;Transfer Syntaxes Not Supported&#39;)</span>
<span class="sd">    transfer_syntax : pydicom.uid.UID</span>
<span class="sd">        The presentation context&#39;s Transfer Syntax</span>

<span class="sd">    SCP : None or int</span>
<span class="sd">        Defaults to None if SCP/SCU role negotiation not used, 0 or 1 if used</span>
<span class="sd">    SCU : None or int</span>
<span class="sd">        Defaults to None if SCP/SCU role negotiation not used, 0 or 1 if used</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x21</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result_reason</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_sub_item</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Used for tracking SCP/SCU Role Negotiation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SCP</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SCU</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">result_reason</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_sub_item</span><span class="p">]</span>

<div class="viewcode-block" id="PresentationContextItemAC.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationContextItemAC.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.utils.PresentationContext</span>
<span class="sd">            The PresentationContext object to use to setup the Item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Add presentation context ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">ID</span>

        <span class="c1"># Add reason</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result_reason</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">Result</span>

        <span class="c1"># Add transfer syntax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_sub_item</span> <span class="o">=</span> <span class="n">TransferSyntaxSubItem</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_sub_item</span><span class="o">.</span><span class="n">FromParams</span><span class="p">(</span><span class="n">primitive</span><span class="o">.</span><span class="n">TransferSyntax</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">get_length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="PresentationContextItemAC.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationContextItemAC.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.utils.PresentationContext</span>
<span class="sd">            The primitive to covert the Item to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">primitive</span> <span class="o">=</span> <span class="n">PresentationContext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">)</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">Result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">result_reason</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">add_transfer_syntax</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_sub_item</span><span class="o">.</span><span class="n">ToParams</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="PresentationContextItemAC.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationContextItemAC.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H B B B B&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">result_reason</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="mh">0x00</span><span class="p">]</span>  <span class="c1"># Reserved</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_sub_item</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="PresentationContextItemAC.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationContextItemAC.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Decode the Item parameters up to the Transfer Syntax</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">result_reason</span><span class="p">,</span>
         <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B H B B B B&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>

        <span class="c1"># Decode the Transfer Syntax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_sub_item</span> <span class="o">=</span> <span class="n">TransferSyntaxSubItem</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_sub_item</span><span class="o">.</span><span class="n">Decode</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the parameters&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">result_reason</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_sub_item</span><span class="p">]</span>

<div class="viewcode-block" id="PresentationContextItemAC.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationContextItemAC.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the PDU length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_sub_item</span><span class="o">.</span><span class="n">length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>

        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;Presentation Context (AC) Item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type:   0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Context ID: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Result/Reason: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result_str</span><span class="p">)</span>

        <span class="n">item_str</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0!s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_sub_item</span><span class="p">)</span>
        <span class="n">item_str_list</span> <span class="o">=</span> <span class="n">item_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  +  </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_str_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">item_str_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;     </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">jj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the presentation context ID.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the Result parameter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">result_reason</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">result_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a string describing the result.&quot;&quot;&quot;</span>
        <span class="n">result_options</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;Accepted&#39;</span><span class="p">,</span>
                          <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;User Rejection&#39;</span><span class="p">,</span>
                          <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Provider Rejection&#39;</span><span class="p">,</span>
                          <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;Abstract Syntax Not Supported&#39;</span><span class="p">,</span>
                          <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;Transfer Syntax Not Supported&#39;</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">result_options</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">transfer_syntax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the transfer syntax.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_sub_item</span><span class="o">.</span><span class="n">transfer_syntax_name</span></div>


<div class="viewcode-block" id="AbstractSyntaxSubItem"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.AbstractSyntaxSubItem">[docs]</a><span class="k">class</span> <span class="nc">AbstractSyntaxSubItem</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an Abstract Syntax Sub-item used in A-ASSOCIATE-RQ PDUs.</span>

<span class="sd">    The Abstract Syntax Sub-item requires the following parameters (see PS3.8</span>
<span class="sd">    Section 9.3.2.2.1):</span>

<span class="sd">        * Item type (1, fixed value, 0x30)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Abstract syntax name (1)</span>

<span class="sd">    See PS3.8 Section 9.3.2.2.1 for the structure of the item, especially</span>
<span class="sd">    Table 9-14.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items - Presentation Context items -</span>
<span class="sd">    Abstract/Transfer Syntax sub-items</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    abstract_syntax : pydicom.uid.UID</span>
<span class="sd">        The abstract syntax</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x30</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abstract_syntax_name</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">abstract_syntax_name</span><span class="p">]</span>

<div class="viewcode-block" id="AbstractSyntaxSubItem.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.AbstractSyntaxSubItem.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pydicom.uid.UID, bytes or str</span>
<span class="sd">            The abstract syntax name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abstract_syntax_name</span> <span class="o">=</span> <span class="n">primitive</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abstract_syntax_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="AbstractSyntaxSubItem.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.AbstractSyntaxSubItem.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pydicom.uid.UID</span>
<span class="sd">            The Abstract Syntax Name&#39;s UID value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abstract_syntax_name</span></div>

<div class="viewcode-block" id="AbstractSyntaxSubItem.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.AbstractSyntaxSubItem.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abstract_syntax_name</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="AbstractSyntaxSubItem.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.AbstractSyntaxSubItem.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">abstract_syntax_name</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the PDU parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">abstract_syntax_name</span><span class="p">]</span>

<div class="viewcode-block" id="AbstractSyntaxSubItem.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.AbstractSyntaxSubItem.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the PDU length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abstract_syntax_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>

        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;Abstract Syntax Sub-item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Syntax name: =</span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abstract_syntax</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">abstract_syntax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the abstract syntax.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">abstract_syntax_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">abstract_syntax_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the abstract syntax name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_abstract_syntax_name</span>

    <span class="nd">@abstract_syntax_name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">abstract_syntax_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the Abstract Syntax Name parameter</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value : pydicom.uid.UID, bytes or str</span>
<span class="sd">            The value for the Abstract Syntax Name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">UID</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Abstract Syntax must be a pydicom.uid.UID, &#39;</span>
                            <span class="s1">&#39;str or bytes&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_abstract_syntax_name</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="TransferSyntaxSubItem"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.TransferSyntaxSubItem">[docs]</a><span class="k">class</span> <span class="nc">TransferSyntaxSubItem</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Transfer Syntax Sub-item used in A-ASSOCIATE-RQ and</span>
<span class="sd">    A-ASSOCIATE-AC PDUs.</span>

<span class="sd">    The Abstract Syntax Sub-item requires the following parameters (see PS3.8</span>
<span class="sd">    Section 9.3.2.2.2):</span>

<span class="sd">        * Item type (1, fixed value, 0x40)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Transfer syntax name (1)</span>

<span class="sd">    See PS3.8 Section 9.3.2.2.2 for the structure of the item, especially</span>
<span class="sd">    Table 9-15.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items - Presentation Context items -</span>
<span class="sd">    Abstract/Transfer Syntax sub-items</span>
<span class="sd">    Used in A_ASSOCIATE_AC - Variable items - Presentation Context items -</span>
<span class="sd">    Transfer Syntax sub-item</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    transfer_syntax : pydicom.uid.UID</span>
<span class="sd">        The transfer syntax</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x40</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_name</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_name</span><span class="p">]</span>

<div class="viewcode-block" id="TransferSyntaxSubItem.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.TransferSyntaxSubItem.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pydicom.uid.UID, bytes or str</span>
<span class="sd">            The transfer syntax name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_name</span> <span class="o">=</span> <span class="n">primitive</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="TransferSyntaxSubItem.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.TransferSyntaxSubItem.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pydicom.uid.UID</span>
<span class="sd">            The Transfer Syntax Name&#39;s UID value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_name</span></div>

<div class="viewcode-block" id="TransferSyntaxSubItem.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.TransferSyntaxSubItem.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_name</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="TransferSyntaxSubItem.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.TransferSyntaxSubItem.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_name</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_name</span><span class="p">]</span>

<div class="viewcode-block" id="TransferSyntaxSubItem.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.TransferSyntaxSubItem.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the item length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>

        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;Transfer syntax sub item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  Transfer syntax name: =</span><span class="si">{0!s}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_name</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">transfer_syntax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the transfer syntax.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transfer_syntax_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">transfer_syntax_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the transfer syntax name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_syntax_name</span>

    <span class="nd">@transfer_syntax_name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">transfer_syntax_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the Transfer Syntax Name parameter.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value : pydicom.uid.UID, bytes or str</span>
<span class="sd">            The value for the Transfer Syntax Name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">UID</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Transfer syntax must be a pydicom.uid.UID, &#39;</span>
                            <span class="s1">&#39;bytes or str&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_syntax_name</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="PresentationDataValueItem"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationDataValueItem">[docs]</a><span class="k">class</span> <span class="nc">PresentationDataValueItem</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Presentation Data Value Item used in P-DATA-TF PDUs.</span>

<span class="sd">    The Presentation Data Value Item requires the following parameters (see</span>
<span class="sd">    PS3.8 Section 9.3.5.1):</span>

<span class="sd">        * Item length (1)</span>
<span class="sd">        * Presentation context ID (1)</span>
<span class="sd">        * Presentation data value (1)</span>

<span class="sd">    See PS3.8 Section 9.3.5.1 for the structure of the item, especially</span>
<span class="sd">    Table 9-23.</span>

<span class="sd">    Used in P_DATA_TF - Presentation data value items</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    data : FIXME</span>
<span class="sd">        The presentation data value</span>
<span class="sd">    ID : int</span>
<span class="sd">        The presentation context ID</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded item in bytes</span>
<span class="sd">    message_control_header_byte : str</span>
<span class="sd">        A string containing the contents of the message control header byte</span>
<span class="sd">        formatted as an 8-bit binary. See PS3.8 FIXME</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span><span class="p">]</span>

<div class="viewcode-block" id="PresentationDataValueItem.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationDataValueItem.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : list of [int, bytes]</span>
<span class="sd">            The Presentation Data as a list [context ID, data]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span> <span class="o">=</span> <span class="n">primitive</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span> <span class="o">=</span> <span class="n">primitive</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="PresentationDataValueItem.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationDataValueItem.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            The Presentation Data as a list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span><span class="p">]</span></div>

<div class="viewcode-block" id="PresentationDataValueItem.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationDataValueItem.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; I B&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="PresentationDataValueItem.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationDataValueItem.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; I B&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span> <span class="o">=</span> \
            <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span><span class="p">]</span>

<div class="viewcode-block" id="PresentationDataValueItem.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.PresentationDataValueItem.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the item length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>

        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;Presentation Value Data Item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Context ID: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span><span class="p">)</span>

        <span class="c1"># Python 2 compatibility</span>
        <span class="n">pdv_sample</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pdv_sample</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">pdv_sample</span> <span class="o">=</span> <span class="p">(</span><span class="nb">format</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="s1">&#39;02x&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pdv_sample</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pdv_sample</span> <span class="o">=</span> <span class="p">(</span><span class="nb">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;02x&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pdv_sample</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Data value: 0x</span><span class="si">{0!s}</span><span class="s2"> ...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; 0x&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pdv_sample</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the presentation data value.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the presentation context ID.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">presentation_context_id</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">message_control_header_byte</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the message control header byte.&quot;&quot;&quot;</span>
        <span class="c1"># Python 2 compatibility</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{:08b}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{:08b}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">presentation_data_value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div>


<div class="viewcode-block" id="UserInformationItem"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserInformationItem">[docs]</a><span class="k">class</span> <span class="nc">UserInformationItem</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the User Information Item used in A-ASSOCIATE-RQ and</span>
<span class="sd">    A-ASSOCIATE-AC PDUs.</span>

<span class="sd">    The User Information Item requires the following parameters (see PS3.8</span>
<span class="sd">    Section 9.3.2.3):</span>

<span class="sd">        * Item type (1, fixed, 0x50)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * User data sub-items (2 or more)</span>
<span class="sd">            * Maximum Length Received Sub-item (1)</span>
<span class="sd">            * Implementation Class UID Sub-item (1)</span>
<span class="sd">            * Optional User Data Sub-items (0 or more)</span>

<span class="sd">    See PS3.8 Section 9.3.2.3 for the structure of the PDU, especially</span>
<span class="sd">    Table 9-16.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items</span>
<span class="sd">    Used in A_ASSOCIATE_AC - Variable items</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    async_ops_window : AsynchronousOperationsWindowSubItem or None</span>
<span class="sd">        The AsynchronousOperationsWindowSubItem object, or None if the sub-item</span>
<span class="sd">        is not present.</span>
<span class="sd">    common_ext_neg : list of</span>
<span class="sd">        pynetdicom3.pdu.SOPClassCommonExtendedNegotiationSubItem or None</span>
<span class="sd">        The common extended negotiation items, or None if there aren&#39;t any</span>
<span class="sd">    ext_neg : list of pynetdicom3.pdu.SOPClassExtendedNegotiationSubItem or None</span>
<span class="sd">        The extended negotiation items, or None if there aren&#39;t any</span>
<span class="sd">    implementation_class_uid : pydicom.uid.UID</span>
<span class="sd">        The implementation class UID for the Implementation Class UID sub-item</span>
<span class="sd">    implementation_version_name : str or None</span>
<span class="sd">        The implementation version name for the Implementation Version Name</span>
<span class="sd">        sub-item, or None if the sub-item is not present.</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    max_operations_invoked : int or None</span>
<span class="sd">        , or None if the sub-item is not present.</span>
<span class="sd">    max_operations_performed : int or None</span>
<span class="sd">        , or None if the sub-item is not present.</span>
<span class="sd">    maximum_length : int</span>
<span class="sd">        The maximum length received value for the Maximum Length sub-item</span>
<span class="sd">    role_selection : list of pynetdicom3.pdu.SCP_SCU_RoleSelectionSubItem or</span>
<span class="sd">    None</span>
<span class="sd">        The SCP_SCU_RoleSelectionSubItem object or None if there aren&#39;t any</span>
<span class="sd">    user_identity : pynetdicom3.pdu.UserIdentitySubItemRQ or</span>
<span class="sd">        pynetdicom3.pdu.UserIdentitySubItemAC or None</span>
<span class="sd">        The UserIdentitySubItemRQ/UserIdentitySubItemAC object, or None if the</span>
<span class="sd">        sub-item is not present.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x50</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">]</span>

<div class="viewcode-block" id="UserInformationItem.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserInformationItem.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">primitive</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ii</span><span class="o">.</span><span class="n">FromParams</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_item_length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="UserInformationItem.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserInformationItem.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">primitive</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="n">primitive</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ii</span><span class="o">.</span><span class="n">ToParams</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="UserInformationItem.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserInformationItem.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">ii</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="UserInformationItem.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserInformationItem.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>

        <span class="c1"># Decode the User Data sub-items section</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_item</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">item</span><span class="o">.</span><span class="n">Decode</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_next_item</span><span class="p">(</span><span class="n">bytestream</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># Reserved</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_update_item_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the item length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">+=</span> <span class="n">ii</span><span class="o">.</span><span class="n">length</span>

<div class="viewcode-block" id="UserInformationItem.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserInformationItem.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the item length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_item_length</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># FIXME: Indent not applying correctly to user_data</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot; User information item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  User Data:</span><span class="se">\n</span><span class="s2"> &quot;</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  </span><span class="si">{0!s}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">async_ops_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the asynchronous operations window item.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">AsynchronousOperationsWindowSubItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">common_ext_neg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the common extended negotiation items.&quot;&quot;&quot;</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">SOPClassCommonExtendedNegotiationSubItem</span><span class="p">):</span>
                <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">items</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ext_neg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the extended negotiation item.&quot;&quot;&quot;</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">SOPClassExtendedNegotiationSubItem</span><span class="p">):</span>
                <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">items</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation_class_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the implementation class UID.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">ImplementationClassUIDSubItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span><span class="o">.</span><span class="n">implementation_class_uid</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation_version_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the implementation version name.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">ImplementationVersionNameSubItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span><span class="o">.</span><span class="n">implementation_version_name</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maximum_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the maximum length.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">MaximumLengthSubItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span><span class="o">.</span><span class="n">maximum_length_received</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_operations_invoked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the maximum number of invoked operations.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">AsynchronousOperationsWindowSubItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span><span class="o">.</span><span class="n">max_operations_invoked</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_operations_performed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the maximum number of performed operations.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">AsynchronousOperationsWindowSubItem</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span><span class="o">.</span><span class="n">max_operations_invoked</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">role_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the SCP/SCU role selection item.&quot;&quot;&quot;</span>
        <span class="n">roles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">SCP_SCU_RoleSelectionSubItem</span><span class="p">):</span>
                <span class="n">roles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">roles</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">roles</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user_identity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the user identity item.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">UserIdentitySubItemRQ</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="n">UserIdentitySubItemAC</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ii</span>

        <span class="k">return</span> <span class="kc">None</span></div>


<span class="c1"># PDU User Information Sub-item Classes</span>
<div class="viewcode-block" id="MaximumLengthSubItem"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.MaximumLengthSubItem">[docs]</a><span class="k">class</span> <span class="nc">MaximumLengthSubItem</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the Maximum Length Sub Item used in A-ASSOCIATE-RQ and</span>
<span class="sd">    A-ASSOCIATE-AC PDUs.</span>

<span class="sd">    The Maximum Length Sub Item requires the following parameters (see PS3.8</span>
<span class="sd">    Annex D.1.1):</span>

<span class="sd">        * Item type (1, fixed, 0x51)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Maximum Length Received (1)</span>

<span class="sd">    See PS3.8 Annex D.1.1 for the structure of the item, especially</span>
<span class="sd">    Table D.1-1.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items - User Information - User Data</span>
<span class="sd">    Used in A_ASSOCIATE_AC - Variable items - User Information - User Data</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x51</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mh">0x04</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maximum_length_received</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">maximum_length_received</span><span class="p">]</span>

<div class="viewcode-block" id="MaximumLengthSubItem.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.MaximumLengthSubItem.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.MaximumLengthNegotiation</span>
<span class="sd">            The primitive to use when setting up the Item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maximum_length_received</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">maximum_length_received</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="MaximumLengthSubItem.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.MaximumLengthSubItem.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.MaximumLengthNegotiation</span>
<span class="sd">            The primitive to convert to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">MaximumLengthNegotiation</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">MaximumLengthNegotiation</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">maximum_length_received</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maximum_length_received</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="MaximumLengthSubItem.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.MaximumLengthSubItem.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H I&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>
                      <span class="mh">0x0004</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">maximum_length_received</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="MaximumLengthSubItem.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.MaximumLengthSubItem.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">maximum_length_received</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B H I&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">maximum_length_received</span><span class="p">]</span>

<div class="viewcode-block" id="MaximumLengthSubItem.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.MaximumLengthSubItem.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the item length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>
        <span class="k">return</span> <span class="mh">0x08</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;Maximum length Sub-item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Maximum length received: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maximum_length_received</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="ImplementationClassUIDSubItem"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ImplementationClassUIDSubItem">[docs]</a><span class="k">class</span> <span class="nc">ImplementationClassUIDSubItem</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the Implementation Class UID Sub Item used in A-ASSOCIATE-RQ and</span>
<span class="sd">    A-ASSOCIATE-AC PDUs.</span>

<span class="sd">    The Implementation Class UID Sub Item requires the following parameters</span>
<span class="sd">    (see PS3.7 Annex D.3.3.2.1):</span>

<span class="sd">        * Item type (1, fixed, 0x51)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Implementation Class UID (1)</span>

<span class="sd">    See PS3.7 Annex D.3.3.2.1-2 for the structure of the item, especially</span>
<span class="sd">    Tables D.3-1 and D.3-2.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items - User Information - User Data</span>
<span class="sd">    Used in A_ASSOCIATE_AC - Variable items - User Information - User Data</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    implementation_class_uid : pydicom.uid.UID</span>
<span class="sd">        The Implementation Class UID</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x52</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">implementation_class_uid</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">implementation_class_uid</span><span class="p">]</span>

<div class="viewcode-block" id="ImplementationClassUIDSubItem.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ImplementationClassUIDSubItem.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives</span>
<span class="sd">                                .ImplementationClassUIDNotification</span>
<span class="sd">            The primitive to use when setting up the Item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">implementation_class_uid</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">implementation_class_uid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation_class_uid</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImplementationClassUIDSubItem.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ImplementationClassUIDSubItem.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.ImplementationClassUIDNotification</span>
<span class="sd">            The primitive to convert to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> \
            <span class="n">ImplementationClassUIDNotification</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">ImplementationClassUIDNotification</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">implementation_class_uid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implementation_class_uid</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="ImplementationClassUIDSubItem.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ImplementationClassUIDSubItem.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Encode the item&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;H&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation_class_uid</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span></div>

<div class="viewcode-block" id="ImplementationClassUIDSubItem.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ImplementationClassUIDSubItem.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">implementation_class_uid</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">implementation_class_uid</span><span class="p">]</span>

<div class="viewcode-block" id="ImplementationClassUIDSubItem.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ImplementationClassUIDSubItem.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the item length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation_class_uid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>

        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;Implementation Class UID Sub-item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Implementation class UID: &#39;</span><span class="si">{0!s}</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">implementation_class_uid</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation_class_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the implementation class uid.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_implementation_class_uid</span>

    <span class="nd">@implementation_class_uid</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">implementation_class_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the implementation class UID to `value`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value : pydicom.uid.UID, bytes or str</span>
<span class="sd">            The UID value to set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">UID</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;implementation_class_uid must be str, bytes &#39;</span>
                            <span class="s1">&#39;or UID&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_implementation_class_uid</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation_class_uid</span><span class="p">)</span></div>


<div class="viewcode-block" id="ImplementationVersionNameSubItem"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ImplementationVersionNameSubItem">[docs]</a><span class="k">class</span> <span class="nc">ImplementationVersionNameSubItem</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the Implementation Class UID Sub Item used in A-ASSOCIATE-RQ and</span>
<span class="sd">    A-ASSOCIATE-AC PDUs.</span>

<span class="sd">    The Implementation Class UID Sub Item requires the following parameters</span>
<span class="sd">    (see PS3.7 Annex D.3.3.2.3):</span>

<span class="sd">        * Item type (1, fixed, 0x51)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Implementation version name (1)</span>

<span class="sd">    See PS3.7 Annex D.3.3.2.3-4 for the structure of the item, especially</span>
<span class="sd">    Tables D.3-3 and D.3-4.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items - User Information - User Data</span>
<span class="sd">    Used in A_ASSOCIATE_AC - Variable items - User Information - User Data</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    implementation_version_name : bytes</span>
<span class="sd">        The Implementation Version Name</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x55</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">implementation_version_name</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">implementation_version_name</span><span class="p">]</span>

<div class="viewcode-block" id="ImplementationVersionNameSubItem.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ImplementationVersionNameSubItem.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives</span>
<span class="sd">                                    .ImplementationVersionNameNotification</span>
<span class="sd">            The primitive to use when setting up the Item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">implementation_version_name</span> <span class="o">=</span> \
            <span class="n">primitive</span><span class="o">.</span><span class="n">implementation_version_name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImplementationVersionNameSubItem.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ImplementationVersionNameSubItem.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert the current Item to a primitive.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.ImplementationVersionNameNotification</span>
<span class="sd">            The primitive to convert to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> \
            <span class="n">ImplementationVersionNameNotification</span>

        <span class="n">tmp</span> <span class="o">=</span> <span class="n">ImplementationVersionNameNotification</span><span class="p">()</span>
        <span class="n">tmp</span><span class="o">.</span><span class="n">implementation_version_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implementation_version_name</span>

        <span class="k">return</span> <span class="n">tmp</span></div>

<div class="viewcode-block" id="ImplementationVersionNameSubItem.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ImplementationVersionNameSubItem.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Encode the item.&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;H&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">implementation_version_name</span>

        <span class="k">return</span> <span class="n">s</span></div>

<div class="viewcode-block" id="ImplementationVersionNameSubItem.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ImplementationVersionNameSubItem.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">implementation_version_name</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the parameters.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">implementation_version_name</span><span class="p">]</span>

<div class="viewcode-block" id="ImplementationVersionNameSubItem.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.ImplementationVersionNameSubItem.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the item length.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation_version_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>

        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;Implementation Version Name Sub-item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Implementation version name: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">implementation_version_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">implementation_version_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the implementation version name as bytes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_implementation_version_name</span>

    <span class="nd">@implementation_version_name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">implementation_version_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the implementation version name.&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_implementation_version_name</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">implementation_version_name</span><span class="p">)</span></div>


<div class="viewcode-block" id="SCP_SCU_RoleSelectionSubItem"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SCP_SCU_RoleSelectionSubItem">[docs]</a><span class="k">class</span> <span class="nc">SCP_SCU_RoleSelectionSubItem</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the SCP/SCU Role Selection Sub Item used in</span>
<span class="sd">    A-ASSOCIATE-RQ and A-ASSOCIATE-AC PDUs.</span>

<span class="sd">    The SCP/SCU Role Selection Sub Item requires the following parameters</span>
<span class="sd">    (see PS3.7 Annex D.3.3.4.1):</span>

<span class="sd">        * Item type (1, fixed, 0x51)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * UID length (1)</span>
<span class="sd">        * SOP Class UID (1)</span>
<span class="sd">        * SCU role (1)</span>
<span class="sd">        * SCP role (1)</span>

<span class="sd">    See PS3.7 Annex D.3.3.4.1-2 for the structure of the item, especially</span>
<span class="sd">    Tables D.3-9 and D.3-10.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items - User Information - User Data</span>
<span class="sd">    Used in A_ASSOCIATE_AC - Variable items - User Information - User Data</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    SCU : int</span>
<span class="sd">        The SCU role (0 or 1)</span>
<span class="sd">    SCP : int</span>
<span class="sd">        The SCP role (0 or 1)</span>
<span class="sd">    UID : pydicom.uid.UID</span>
<span class="sd">        The UID of the abstract syntax that this sub-item pertains</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x54</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uid_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scu_role</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scp_role</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">uid_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">scu_role</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">scp_role</span><span class="p">]</span>

<div class="viewcode-block" id="SCP_SCU_RoleSelectionSubItem.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SCP_SCU_RoleSelectionSubItem.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.SCP_SCU_RoleSelectionNegotiation</span>
<span class="sd">            The primitive to use when setting up the Item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">sop_class_uid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scu_role</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">primitive</span><span class="o">.</span><span class="n">scu_role</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scp_role</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">primitive</span><span class="o">.</span><span class="n">scp_role</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uid_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="SCP_SCU_RoleSelectionSubItem.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SCP_SCU_RoleSelectionSubItem.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.SCP_SCU_RoleSelectionNegotiation</span>
<span class="sd">            The primitive to convert to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">SCP_SCU_RoleSelectionNegotiation</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">SCP_SCU_RoleSelectionNegotiation</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">sop_class_uid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">scu_role</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scu_role</span><span class="p">)</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">scp_role</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scp_role</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="SCP_SCU_RoleSelectionSubItem.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SCP_SCU_RoleSelectionSubItem.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Encode the item&quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H H&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">uid_length</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt; B B&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scu_role</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scp_role</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="SCP_SCU_RoleSelectionSubItem.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SCP_SCU_RoleSelectionSubItem.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">uid_length</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt; B B H H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uid_length</span><span class="p">)</span>

        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scu_role</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scp_role</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;B B&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the parameters&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">uid_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">scu_role</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">scp_role</span><span class="p">]</span>

<div class="viewcode-block" id="SCP_SCU_RoleSelectionSubItem.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SCP_SCU_RoleSelectionSubItem.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the item length&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uid_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>

        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;SCP/SCU Role Selection Sub-item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  UID length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uid_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  SOP Class UID: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">UID</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  SCU Role: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SCU</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  SCP Role: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SCP</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">UID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the UID.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sop_class_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the SOP class uid.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sop_class_uid</span>

    <span class="nd">@sop_class_uid</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">sop_class_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the SOP class uid.&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="c1"># UID is a str subclass</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;sop_class_uid must be str, bytes or &#39;</span>
                            <span class="s1">&#39;pydicom.uid.UID&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_sop_class_uid</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uid_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">uid_length</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">SCU</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the SCU role&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scu_role</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scu_role</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the SCU role&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scu_role</span>

    <span class="nd">@scu_role</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">scu_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the SCU role&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;SCU Role parameter value must be 0 or 1&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_scu_role</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">SCP</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the SCP role&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scp_role</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scp_role</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the SCP role&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scp_role</span>

    <span class="nd">@scp_role</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">scp_role</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the SCP role&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;SCP Role parameter value must be 0 or 1&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_scp_role</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="AsynchronousOperationsWindowSubItem"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.AsynchronousOperationsWindowSubItem">[docs]</a><span class="k">class</span> <span class="nc">AsynchronousOperationsWindowSubItem</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the Asynchronous Operations Window Sub Item used in</span>
<span class="sd">    A-ASSOCIATE-RQ and A-ASSOCIATE-AC PDUs.</span>

<span class="sd">    The Asynchronous Operations Window Sub Item requires the following</span>
<span class="sd">    parameters (see PS3.7 Annex D.3.3.3.1):</span>

<span class="sd">        * Item type (1, fixed, 0x51)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Maximum number of operations invoked (1)</span>
<span class="sd">        * Maximum number of operations performed (1)</span>

<span class="sd">    See PS3.7 Annex D.3.3.3.1-2 for the structure of the item, especially</span>
<span class="sd">    Tables D.3-7 and D.3-8.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items - User Information - User Data</span>
<span class="sd">    Used in A_ASSOCIATE_AC - Variable items - User Information - User Data</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    max_operations_invoked : int</span>
<span class="sd">        The maximum number of operations invoked</span>
<span class="sd">    max_operations_performed : int</span>
<span class="sd">        The maximum number of operations performed</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x53</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mh">0x04</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span><span class="p">]</span>

<div class="viewcode-block" id="AsynchronousOperationsWindowSubItem.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.AsynchronousOperationsWindowSubItem.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive :</span>
<span class="sd">        pynetdicom3.pdu_primitives.AsynchronousOperationsWindowNegotiation</span>
<span class="sd">            The primitive to use when setting up the Item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span> <span class="o">=</span> \
            <span class="n">primitive</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span> <span class="o">=</span> \
            <span class="n">primitive</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="AsynchronousOperationsWindowSubItem.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.AsynchronousOperationsWindowSubItem.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.AsynchronousOperationsWindowNegotiation</span>
<span class="sd">            The primitive to convert to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> \
            <span class="n">AsynchronousOperationsWindowNegotiation</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">AsynchronousOperationsWindowNegotiation</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="AsynchronousOperationsWindowSubItem.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.AsynchronousOperationsWindowSubItem.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H H H&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="AsynchronousOperationsWindowSubItem.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.AsynchronousOperationsWindowSubItem.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span><span class="p">)</span> <span class="o">=</span> \
            <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;B B H H H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the parameters&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span><span class="p">]</span>

<div class="viewcode-block" id="AsynchronousOperationsWindowSubItem.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.AsynchronousOperationsWindowSubItem.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the item length&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>
        <span class="k">return</span> <span class="mi">8</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_operations_invoked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the maximum number of operations invoked&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_operations_performed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the maximum number of operations performed&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;Asynchronous Operation Window Sub-item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Max. number of operations invoked: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_invoked</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Max. number of operations performed: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maximum_number_operations_performed</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="UserIdentitySubItemRQ"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemRQ">[docs]</a><span class="k">class</span> <span class="nc">UserIdentitySubItemRQ</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the User Identity RQ Sub Item used in A-ASSOCIATE-RQ PDUs.</span>

<span class="sd">    The User Identity RQ Sub Item requires the following</span>
<span class="sd">    parameters (see PS3.7 Annex D.3.3.7.1):</span>

<span class="sd">        * Item type (1, fixed, 0x58)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * User identity type (1)</span>
<span class="sd">        * Positive response requested (1)</span>
<span class="sd">        * Primary field length (1)</span>
<span class="sd">        * Primary field (1)</span>
<span class="sd">        * Secondary field length (1)</span>
<span class="sd">        * Secondary field (1, only if user identity type = 2)</span>

<span class="sd">    See PS3.7 Annex D.3.3.7.1 for the structure of the item, especially</span>
<span class="sd">    Table D.3-14.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items - User Information - User Data</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    id_type : int</span>
<span class="sd">        The user identity type [1, 2, 3, 4]</span>
<span class="sd">    id_type_str : str</span>
<span class="sd">        The user identity type as a string [&#39;Username&#39;, &#39;Username/Password&#39;,</span>
<span class="sd">        &#39;Kerberos&#39;, &#39;SAML&#39;]</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    primary : bytes</span>
<span class="sd">        The value of the primary field</span>
<span class="sd">    response_requested : bool</span>
<span class="sd">        True if a positive response is requested, False otherwise</span>
<span class="sd">    secondary : bytes or None</span>
<span class="sd">        The value of the secondary field, None if not used</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x58</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_identity_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">positive_response_requested</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primary_field_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primary_field</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;User Identity (RQ) Sub-item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  User identity type: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_identity_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Positive response requested: </span><span class="si">{0:d}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">positive_response_requested</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Primary field length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primary_field_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Primary field: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_field</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_identity_type</span> <span class="o">==</span> <span class="mh">0x02</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Secondary field length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field_length</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Secondary field: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">secondary_field</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Secondary field length: (not used)</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Secondary field: (not used)</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">return</span> <span class="n">s</span>

<div class="viewcode-block" id="UserIdentitySubItemRQ.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemRQ.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.UserIdentityParameters</span>
<span class="sd">                    The primitive to use when setting up the Item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_identity_type</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">user_identity_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">positive_response_requested</span> <span class="o">=</span> \
            <span class="nb">int</span><span class="p">(</span><span class="n">primitive</span><span class="o">.</span><span class="n">positive_response_requested</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primary_field</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">primary_field</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primary_field_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_field</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">secondary_field</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">secondary_field</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field_length</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_field_length</span> \
                             <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field_length</span></div>

<div class="viewcode-block" id="UserIdentitySubItemRQ.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemRQ.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.UseIdentityParameters</span>
<span class="sd">            The primitive to convert to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">UserIdentityNegotiation</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">UserIdentityNegotiation</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">user_identity_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_identity_type</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">positive_response_requested</span> <span class="o">=</span> \
            <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">positive_response_requested</span><span class="p">)</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">primary_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_field</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">secondary_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="UserIdentitySubItemRQ.encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemRQ.encode">[docs]</a>    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Encode the item&quot;&quot;&quot;</span>
        <span class="c1"># Override the default</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span></div>

<div class="viewcode-block" id="UserIdentitySubItemRQ.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemRQ.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        TODO:</span>

<span class="sd">        * Add checking prior to encode to ensure all parameters are valid</span>
<span class="sd">          (should check all extended negotiation items as these are</span>
<span class="sd">          typically user defined when local is Requesting)</span>
<span class="sd">        * If local requests positive response but doesn&#39;t receive then</span>
<span class="sd">          abort association if established</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H B B H&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">user_identity_type</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">positive_response_requested</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">primary_field_length</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="nb">bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_field</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;H&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field_length</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_identity_type</span> <span class="o">==</span> <span class="mh">0x02</span><span class="p">:</span>
            <span class="n">bytestring</span> <span class="o">+=</span> <span class="nb">bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">secondary_field</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="UserIdentitySubItemRQ.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemRQ.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">user_identity_type</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">positive_response_requested</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">primary_field_length</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;B B H B B H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">primary_field</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_field_length</span><span class="p">)</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">secondary_field_length</span><span class="p">,)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_identity_type</span> <span class="o">==</span> <span class="mh">0x02</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">secondary_field_length</span><span class="p">)</span></div>

<div class="viewcode-block" id="UserIdentitySubItemRQ.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemRQ.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the item length&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_field_length</span> <span class="o">+</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field_length</span>
        <span class="c1"># self._update_parameters()</span>

        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See PS3.7 D3.3.7</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            1: Username as utf-8 string,</span>
<span class="sd">            2: Username as utf-8 string and passcode</span>
<span class="sd">            3: Kerberos Service ticket</span>
<span class="sd">            4: SAML Assertion</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_identity_type</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id_type_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a string of the ID type&quot;&quot;&quot;</span>
        <span class="n">id_types</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;Username&#39;</span><span class="p">,</span>
                    <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Username/Password&#39;</span><span class="p">,</span>
                    <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;Kerberos&#39;</span><span class="p">,</span>
                    <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;SAML&#39;</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">id_types</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">user_identity_type</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">primary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the primary field&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_field</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">response_requested</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the response requested&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">positive_response_requested</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">secondary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the secondary field&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">secondary_field</span></div>


<div class="viewcode-block" id="UserIdentitySubItemAC"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemAC">[docs]</a><span class="k">class</span> <span class="nc">UserIdentitySubItemAC</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the User Identity RQ Sub Item used in A-ASSOCIATE-RQ PDUs.</span>

<span class="sd">    The User Identity AC Sub Item requires the following parameters</span>
<span class="sd">    (see PS3.7 Annex D.3.3.7.2):</span>

<span class="sd">        * Item type (1, fixed, 0x59)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * Server response length (1)</span>
<span class="sd">        * Server response (1)</span>

<span class="sd">    See PS3.7 Annex D.3.3.7.2 for the structure of the item, especially</span>
<span class="sd">    Table D.3-15.</span>

<span class="sd">    Used in A_ASSOCIATE_AC - Variable items - User Information - User Data</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    response : bytes</span>
<span class="sd">        The value for the server response. For user identity type value of</span>
<span class="sd">          * 1: b&#39;&#39;</span>
<span class="sd">          * 2: b&#39;&#39;</span>
<span class="sd">          * 3: the Kerberos server ticket, encoded as per RFC-1510</span>
<span class="sd">          * 4: the SAML response</span>

<span class="sd">    TODO: Add user interface - setter for server_response, automatic length</span>
<span class="sd">            determination</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x59</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_response_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_response</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">server_response_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">server_response</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;User Identity (AC) Sub-item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Server response length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">server_response_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Server response: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_response</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

<div class="viewcode-block" id="UserIdentitySubItemAC.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemAC.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.UserIdentityParameters</span>
<span class="sd">            The primitive to use when setting up the Item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_response</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">server_response</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_response_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_response</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_response_length</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="UserIdentitySubItemAC.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemAC.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.UseIdentityParameters</span>
<span class="sd">            The primitive to convert to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">UserIdentityNegotiation</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">UserIdentityNegotiation</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">server_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_response</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="UserIdentitySubItemAC.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemAC.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H H&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">server_response_length</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="nb">bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_response</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="UserIdentitySubItemAC.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemAC.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">server_response_length</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;B B H H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">server_response</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_response_length</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the parameters&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">server_response_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">server_response</span><span class="p">]</span>

<div class="viewcode-block" id="UserIdentitySubItemAC.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.UserIdentitySubItemAC.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the item length&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_response_length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span>

        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">response</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the response&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_response</span></div>


<div class="viewcode-block" id="SOPClassExtendedNegotiationSubItem"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassExtendedNegotiationSubItem">[docs]</a><span class="k">class</span> <span class="nc">SOPClassExtendedNegotiationSubItem</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the SOP Class Extended Negotiation Sub Item used in</span>
<span class="sd">    A-ASSOCIATE-RQ and A-ASSOCIATE-AC PDUs.</span>

<span class="sd">    The SOP Class Extended Negotiation Sub Item requires the following</span>
<span class="sd">    parameters (see PS3.7 Annex D.3.3.5.1):</span>

<span class="sd">        * Item type (1, fixed, 0x56)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * UID length (1)</span>
<span class="sd">        * SOP Class UID (1)</span>
<span class="sd">        * Service class application information</span>

<span class="sd">    See PS3.7 Annex D.3.3.5.1-2 for the structure of the item, especially</span>
<span class="sd">    Tables D.3-11.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items - User Information - User Data</span>
<span class="sd">    Used in A_ASSOCIATE_AC - Variable items - User Information - User Data</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    UID : pydicom.uid.UID</span>
<span class="sd">        The UID of the abstract syntax that this sub-item pertains</span>
<span class="sd">    application_information :</span>
<span class="sd">        The application information specific to the service class identified</span>
<span class="sd">        by `sop_class_uid`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x56</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_class_application_information</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">service_class_application_information</span><span class="p">]</span>

<div class="viewcode-block" id="SOPClassExtendedNegotiationSubItem.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassExtendedNegotiationSubItem.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.SOPClassExtendedNegotiation</span>
<span class="sd">            The primitive to use when setting up the Item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">sop_class_uid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_class_application_information</span> <span class="o">=</span> \
            <span class="n">primitive</span><span class="o">.</span><span class="n">service_class_application_information</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span> \
                             <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_class_application_information</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

<div class="viewcode-block" id="SOPClassExtendedNegotiationSubItem.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassExtendedNegotiationSubItem.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.SOPClassExtendedNegotiation</span>
<span class="sd">            The primitive to convert to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">SOPClassExtendedNegotiation</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">SOPClassExtendedNegotiation</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">sop_class_uid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">service_class_application_information</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">service_class_application_information</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="SOPClassExtendedNegotiationSubItem.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassExtendedNegotiationSubItem.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H H&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="mh">0x00</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_class_application_information</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="SOPClassExtendedNegotiationSubItem.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassExtendedNegotiationSubItem.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="n">_</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;B B H H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span><span class="p">)</span>
        <span class="n">remaining</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_class_application_information</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">remaining</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_update_parameters</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_update_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the parameters&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="mh">0x00</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">service_class_application_information</span><span class="p">]</span>

<div class="viewcode-block" id="SOPClassExtendedNegotiationSubItem.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassExtendedNegotiationSubItem.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the item length&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span> \
                             <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_class_application_information</span><span class="p">)</span>

        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;SOP Class Extended Negotiation Sub-item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  SOP class UID length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  SOP class: =</span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># Python 2 compatibility</span>
        <span class="n">app_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_class_application_information</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">app_info</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">app_info</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">x&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">x&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="p">[</span><span class="s1">&#39;</span><span class="si">{0:02x}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">app_info</span><span class="p">])</span>

        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Service class application information: </span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">app_info</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">UID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the SOP class uid&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sop_class_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the sop class uid&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sop_class_uid</span>

    <span class="nd">@sop_class_uid</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">sop_class_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the SOP class UID&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;sop_class_uid must be str, bytes or &#39;</span>
                            <span class="s1">&#39;pydicom.uid.UID&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_sop_class_uid</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">app_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the application information&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_class_application_information</span></div>


<div class="viewcode-block" id="SOPClassCommonExtendedNegotiationSubItem"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassCommonExtendedNegotiationSubItem">[docs]</a><span class="k">class</span> <span class="nc">SOPClassCommonExtendedNegotiationSubItem</span><span class="p">(</span><span class="n">PDU</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the SOP Class Common Extended Negotiation Sub Item used in</span>
<span class="sd">    A-ASSOCIATE-RQ PDUs.</span>

<span class="sd">    The SOP Class Common Extended Negotiation Sub Item requires the following</span>
<span class="sd">    parameters (see PS3.7 Annex D.3.3.6.1):</span>

<span class="sd">        * Item type (1, fixed, 0x57)</span>
<span class="sd">        * Sub-item version (1, fixed, 0x00)</span>
<span class="sd">        * Item length (1)</span>
<span class="sd">        * SOP class UID length (1)</span>
<span class="sd">        * SOP class UID (1)</span>
<span class="sd">        * Service class UID length (1)</span>
<span class="sd">        * Service class UID (1)</span>
<span class="sd">        * Related general SOP class identification length (1)</span>
<span class="sd">        * Related general SOP class identification sub fields (0 or more)</span>
<span class="sd">          * Related general SOP class UID length (1)</span>
<span class="sd">          * Related general SOP class UID (1)</span>

<span class="sd">    See PS3.7 Annex D.3.3.6.1 for the structure of the item, especially</span>
<span class="sd">    Tables D.3-12 and D.3-13.</span>

<span class="sd">    The Requestor may only offset one SOP Class Common Extended Negotiation item</span>
<span class="sd">    for each SOP Class UID that&#39;s present in the A-ASSOCIATE-RQ.</span>

<span class="sd">    No response is necessary and the Common Extended Negotiation items shall be</span>
<span class="sd">    omitted in the A-ASSOCIATE response.</span>

<span class="sd">    Used in A_ASSOCIATE_RQ - Variable items - User Information - User Data</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    length : int</span>
<span class="sd">        The length of the encoded Item in bytes</span>
<span class="sd">    FIXME</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_type</span> <span class="o">=</span> <span class="mh">0x57</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sub_item_version</span> <span class="o">=</span> <span class="mh">0x00</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">sub_item_version</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span><span class="p">]</span>

<div class="viewcode-block" id="SOPClassCommonExtendedNegotiationSubItem.FromParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassCommonExtendedNegotiationSubItem.FromParams">[docs]</a>    <span class="k">def</span> <span class="nf">FromParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">primitive</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set up the Item using the parameter values from the `primitive`</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        primitive : pynetdicom3.pdu_primitives.SOPClassCommonExtendedNegotiation</span>
<span class="sd">            The primitive to use when setting up the Item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">sop_class_uid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid</span> <span class="o">=</span> <span class="n">primitive</span><span class="o">.</span><span class="n">service_class_uid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span> <span class="o">=</span> \
            <span class="n">primitive</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">uid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">+</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid_length</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">+</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span></div>

<div class="viewcode-block" id="SOPClassCommonExtendedNegotiationSubItem.ToParams"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassCommonExtendedNegotiationSubItem.ToParams">[docs]</a>    <span class="k">def</span> <span class="nf">ToParams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the current Item to a primitive</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pynetdicom3.pdu_primitives.SOPClassCommonExtendedNegotiation</span>
<span class="sd">            The primitive to convert to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pynetdicom3.pdu_primitives</span> <span class="k">import</span> <span class="n">SOPClassCommonExtendedNegotiation</span>

        <span class="n">primitive</span> <span class="o">=</span> <span class="n">SOPClassCommonExtendedNegotiation</span><span class="p">()</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">sop_class_uid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">service_class_uid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid</span>
        <span class="n">primitive</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span>

        <span class="k">return</span> <span class="n">primitive</span></div>

<div class="viewcode-block" id="SOPClassCommonExtendedNegotiationSubItem.encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassCommonExtendedNegotiationSubItem.encode">[docs]</a>    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Encode the item&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Encode</span><span class="p">()</span></div>

<div class="viewcode-block" id="SOPClassCommonExtendedNegotiationSubItem.Encode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassCommonExtendedNegotiationSubItem.Encode">[docs]</a>    <span class="k">def</span> <span class="nf">Encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode the Item&#39;s parameter values into a bytes string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bytestring : bytes</span>
<span class="sd">            The encoded Item used in the parent PDU</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="s1">&#39;&gt; B B H H&#39;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">sub_item_version</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span><span class="p">]</span>

        <span class="n">bytestring</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">()</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="n">formats</span><span class="p">,</span> <span class="o">*</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;H&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid_length</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="n">bytestring</span> <span class="o">+=</span> \
            <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;H&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">sub_fields</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span><span class="p">:</span>
            <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">pack</span><span class="p">(</span><span class="s1">&#39;&gt;H&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub_fields</span><span class="p">))</span>
            <span class="n">bytestring</span> <span class="o">+=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">sub_fields</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">bytestring</span></div>

<div class="viewcode-block" id="SOPClassCommonExtendedNegotiationSubItem.Decode"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassCommonExtendedNegotiationSubItem.Decode">[docs]</a>    <span class="k">def</span> <span class="nf">Decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bytestream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decode the parameter values for the Item from the parent PDU&#39;s byte</span>
<span class="sd">        stream</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bytestream : io.BytesIO</span>
<span class="sd">            The byte stream to decode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">sub_item_version</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span><span class="p">)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;B B H H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span><span class="p">)</span>

        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid_length</span><span class="p">,)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid_length</span><span class="p">)</span>

        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span><span class="p">,)</span> <span class="o">=</span> \
            <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

        <span class="c1"># Read remaining bytes in item</span>
        <span class="n">remaining</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span>
        <span class="n">uids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="n">remaining</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="p">(</span><span class="n">uid_length</span><span class="p">,)</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;&gt;H&#39;</span><span class="p">,</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">uid</span> <span class="o">=</span> <span class="n">bytestream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">uid_length</span><span class="p">)</span>
            <span class="n">uids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>

            <span class="n">remaining</span> <span class="o">-=</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">uid_length</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span> <span class="o">=</span> <span class="n">uids</span></div>

<div class="viewcode-block" id="SOPClassCommonExtendedNegotiationSubItem.get_length"><a class="viewcode-back" href="../../api.html#pynetdicom3.pdu.SOPClassCommonExtendedNegotiationSubItem.get_length">[docs]</a>    <span class="k">def</span> <span class="nf">get_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the item length&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span> <span class="o">+</span> \
            <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid_length</span> <span class="o">+</span> \
            <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span>

        <span class="k">return</span> <span class="mi">4</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_length</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;SOP Class Common Extended Negotiation Sub-item</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item type: 0x</span><span class="si">{0:02x}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_type</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Item length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  SOP class UID length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  SOP class: =</span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Service class UID length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Service class UID: =</span><span class="si">{0!s}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Related general SOP class ID length: </span><span class="si">{0:d}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;  Related general SOP class ID(s):</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;    =</span><span class="si">{0!s}</span><span class="s2"> (</span><span class="si">{1!s}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ii</span><span class="o">.</span><span class="n">title</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sop_class_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the SOP class uid&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sop_class_uid</span>

    <span class="nd">@sop_class_uid</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">sop_class_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the SOP class UID&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;sop_class_uid must be str, bytes or &#39;</span>
                            <span class="s1">&#39;pydicom.uid.UID&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_sop_class_uid</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sop_class_uid_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">service_class_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the service class UID&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_service_class_uid</span>

    <span class="nd">@service_class_uid</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">service_class_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the service class UID&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;service_class_uid must be str, bytes or &#39;</span>
                            <span class="s1">&#39;pydicom.uid.UID&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_service_class_uid</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">service_class_uid_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">related_general_sop_class_identification</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the related general sop class ID&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_related_general_sop_class_identification</span>

    <span class="nd">@related_general_sop_class_identification</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">related_general_sop_class_identification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the related general sop class ID&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_related_general_sop_class_identification</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">value_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">UID</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;related_general_sop_class_identification &#39;</span>
                                <span class="s1">&#39;must be str, bytes or pydicom.uid.UID&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_related_general_sop_class_identification</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">related_general_sop_class_identification_length</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, pynetdicom3 contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.9.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>